var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));

// src/constants.ts
var builder = (options) => {
  const { z = 3, mu = 25, preventSigmaIncrease = false, epsilon = 1e-4 } = options;
  const { tau = mu / 300, sigma = mu / z, beta = sigma / 2, limitSigma = preventSigmaIncrease } = options;
  const betaSq = beta ** 2;
  return {
    SIGMA: sigma,
    MU: mu,
    EPSILON: epsilon,
    TWOBETASQ: 2 * betaSq,
    BETA: beta,
    BETASQ: betaSq,
    Z: z,
    TAU: tau,
    LIMIT_SIGMA: limitSigma
  };
};
var constants_default = builder;

// src/rating.ts
var rating = (init, options = {}) => {
  const { MU: mu, SIGMA: sigma } = constants_default(__spreadValues(__spreadValues({}, options), init));
  return { mu, sigma };
};
var rating_default = rating;

// src/rate.ts
import { sortBy, identity, range } from "ramda";
import { unwind } from "sort-unwind";

// src/util.ts
import { zip } from "ramda";
var sum = (a, b) => a + b;
var rankings = (teams, rank = []) => {
  const teamScores = teams.map((_, i) => rank[i] || i);
  const outRank = new Array(teams.length);
  let s = 0;
  for (let j = 0; j < teamScores.length; j += 1) {
    if (j > 0 && teamScores[j - 1] < teamScores[j]) {
      s = j;
    }
    outRank[j] = s;
  }
  return outRank;
};
var teamRating = (options) => (game) => {
  const rank = rankings(game, options.rank);
  return game.map((team, i) => [
    // mu[i]
    team.map(({ mu }) => mu).reduce(sum, 0),
    // sigma^2[i]
    team.map(({ sigma }) => sigma * sigma).reduce(sum, 0),
    // (original team data)
    team,
    // rank[i]
    rank[i]
  ]);
};
var utilC = (options) => {
  const { BETASQ } = constants_default(options);
  return (teamRatings) => Math.sqrt(teamRatings.map(([_teamMu, teamSigmaSq, _team, _rank]) => teamSigmaSq + BETASQ).reduce(sum, 0));
};
var utilSumQ = (teamRatings, c) => teamRatings.map(
  ([_qMu, _qSigmaSq, _qTeam, qRank]) => teamRatings.filter(([_iMu, _iSigmaSq, _iTeam, iRank]) => iRank >= qRank).map(([iMu, _iSigmaSq, _iTeam, _iRank]) => Math.exp(iMu / c)).reduce(sum, 0)
);
var utilA = (teamRatings) => teamRatings.map(
  ([_iMu, _iSigmaSq, _iTeam, iRank]) => teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => iRank === qRank).length
);
var gamma = (options) => {
  var _a;
  return (_a = options.gamma) != null ? _a : (
    // default to iSigma / c
    (c, _k, _mu, sigmaSq, _team, _qRank) => Math.sqrt(sigmaSq) / c
  );
};
var util_default = (options) => ({
  utilC: utilC(options),
  teamRating: teamRating(options),
  gamma: gamma(options)
});

// src/models/plackett-luce.ts
var model = (game, options = {}) => {
  const { EPSILON } = constants_default(options);
  const { utilC: utilC2, teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const c = utilC2(teamRatings);
  const sumQ = utilSumQ(teamRatings, c);
  const a = utilA(teamRatings);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const iMuOverCe = Math.exp(iMu / c);
    const [omegaSum, deltaSum] = teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => qRank <= iRank).reduce(
      ([omega, delta], [_], q) => {
        const quotient = iMuOverCe / sumQ[q];
        return [omega + (i === q ? 1 - quotient : -quotient) / a[q], delta + quotient * (1 - quotient) / a[q]];
      },
      [0, 0]
    );
    const iGamma = gamma2(c, teamRatings.length, ...iTeamRating);
    const iOmega = omegaSum * (iSigmaSq / c);
    const iDelta = iGamma * deltaSum * (iSigmaSq / c ** 2);
    return iTeam.map(({ mu, sigma }) => ({
      mu: mu + sigma ** 2 / iSigmaSq * iOmega,
      sigma: sigma * Math.sqrt(Math.max(1 - sigma ** 2 / iSigmaSq * iDelta, EPSILON))
    }));
  });
};
var plackett_luce_default = model;

// src/statistics.ts
import gaussian from "gaussian";
var normal = gaussian(0, 1);
var phiMajor = (x) => normal.cdf(x);
var phiMajorInverse = (x) => normal.ppf(x);

// src/rate.ts
var rate = (teams, options = {}) => {
  var _a, _b, _c;
  const { LIMIT_SIGMA, TAU } = constants_default(options);
  const { model: model2 = plackett_luce_default } = options;
  let processedTeams = teams;
  if (options.tau) {
    const tauSquared = TAU * TAU;
    processedTeams = teams.map(
      (team) => team.map((p) => __spreadProps(__spreadValues({}, p), {
        sigma: Math.sqrt(p.sigma * p.sigma + tauSquared)
      }))
    );
  }
  const rank = (_c = (_b = options.rank) != null ? _b : (_a = options.score) == null ? void 0 : _a.map((points) => -points)) != null ? _c : range(1, teams.length + 1);
  const [orderedTeams, tenet] = unwind(rank, processedTeams);
  const newRatings = model2(orderedTeams, __spreadProps(__spreadValues({}, options), {
    rank: sortBy(identity, rank)
  }));
  let [reorderedTeams] = unwind(tenet, newRatings);
  if (TAU && LIMIT_SIGMA) {
    reorderedTeams = reorderedTeams.map(
      (team, i) => team.map((p, j) => __spreadProps(__spreadValues({}, p), {
        sigma: Math.min(p.sigma, teams[i][j].sigma)
      }))
    );
  }
  return reorderedTeams;
};
var rate_default = rate;

// src/ordinal.ts
var ordinal = (rating2, options = {}) => {
  const { sigma, mu } = rating2;
  const { Z } = constants_default(options);
  return mu - Z * sigma;
};
var ordinal_default = ordinal;

// src/predict-win.ts
var predictWin = (teams, options = {}) => {
  const { teamRating: teamRating2 } = util_default(options);
  const { BETASQ } = constants_default(options);
  const teamRatings = teamRating2(teams);
  const n = teams.length;
  const denom = n * (n - 1) / 2;
  return teamRatings.map(
    ([muA, sigmaSqA], i) => teamRatings.filter((_, q) => i !== q).map(([muB, sigmaSqB]) => phiMajor((muA - muB) / Math.sqrt(n * BETASQ + sigmaSqA + sigmaSqB))).reduce(sum, 0) / denom
  );
};
var predict_win_default = predictWin;

// src/predict-draw.ts
import { flatten, sum as sum2, map, addIndex, reduce, head } from "ramda";
var predictDraw = (teams, options = {}) => {
  const { teamRating: teamRating2 } = util_default(options);
  const { BETASQ, BETA } = constants_default(options);
  const totalPlayerCount = flatten(teams).length;
  const drawProbability = 1 / totalPlayerCount;
  const drawMargin = Math.sqrt(totalPlayerCount) * BETA * phiMajorInverse((1 + drawProbability) / 2);
  const teamRatings = map((team) => head(teamRating2([team])), teams);
  const pairwiseProbs = addIndex(reduce)(
    (outerAccum, pairA, i) => {
      const [muA, sigmaSqA] = pairA;
      return reduce(
        (innerAccum, pairB) => {
          const [muB, sigmaSqB] = pairB;
          const sharedDenom = Math.sqrt(totalPlayerCount * BETASQ + sigmaSqA + sigmaSqB);
          innerAccum.push(
            phiMajor((drawMargin - muA + muB) / sharedDenom) - phiMajor((muB - muA - drawMargin) / sharedDenom)
          );
          return innerAccum;
        },
        outerAccum,
        teamRatings.slice(i + 1)
      );
    },
    [],
    teamRatings
  );
  return sum2(pairwiseProbs) / pairwiseProbs.length;
};
var predict_draw_default = predictDraw;
export {
  ordinal_default as ordinal,
  predict_draw_default as predictDraw,
  predict_win_default as predictWin,
  rate_default as rate,
  rating_default as rating
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbnN0YW50cy50cyIsICIuLi9zcmMvcmF0aW5nLnRzIiwgIi4uL3NyYy9yYXRlLnRzIiwgIi4uL3NyYy91dGlsLnRzIiwgIi4uL3NyYy9tb2RlbHMvcGxhY2tldHQtbHVjZS50cyIsICIuLi9zcmMvc3RhdGlzdGljcy50cyIsICIuLi9zcmMvb3JkaW5hbC50cyIsICIuLi9zcmMvcHJlZGljdC13aW4udHMiLCAiLi4vc3JjL3ByZWRpY3QtZHJhdy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IGJ1aWxkZXIgPSAob3B0aW9uczogT3B0aW9ucykgPT4ge1xuICAvLyBpJ2QgbG92ZSB0byBrbm93IG9mIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzXG4gIGNvbnN0IHsgeiA9IDMsIG11ID0gMjUsIHByZXZlbnRTaWdtYUluY3JlYXNlID0gZmFsc2UsIGVwc2lsb24gPSAwLjAwMDEgfSA9IG9wdGlvbnNcbiAgY29uc3QgeyB0YXUgPSBtdSAvIDMwMCwgc2lnbWEgPSBtdSAvIHosIGJldGEgPSBzaWdtYSAvIDIsIGxpbWl0U2lnbWEgPSBwcmV2ZW50U2lnbWFJbmNyZWFzZSB9ID0gb3B0aW9uc1xuICBjb25zdCBiZXRhU3EgPSBiZXRhICoqIDJcblxuICByZXR1cm4ge1xuICAgIFNJR01BOiBzaWdtYSxcbiAgICBNVTogbXUsXG4gICAgRVBTSUxPTjogZXBzaWxvbixcbiAgICBUV09CRVRBU1E6IDIgKiBiZXRhU3EsXG4gICAgQkVUQTogYmV0YSxcbiAgICBCRVRBU1E6IGJldGFTcSxcbiAgICBaOiB6LFxuICAgIFRBVTogdGF1LFxuICAgIExJTUlUX1NJR01BOiBsaW1pdFNpZ21hLFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJ1aWxkZXJcbiIsICJpbXBvcnQgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgT3B0aW9ucywgUmF0aW5nIH0gZnJvbSAnLi90eXBlcydcblxuY29uc3QgcmF0aW5nID0gKGluaXQ/OiB7IG11PzogbnVtYmVyOyBzaWdtYT86IG51bWJlciB9LCBvcHRpb25zOiBPcHRpb25zID0ge30pOiBSYXRpbmcgPT4ge1xuICBjb25zdCB7IE1VOiBtdSwgU0lHTUE6IHNpZ21hIH0gPSBjb25zdGFudHMoeyAuLi5vcHRpb25zLCAuLi5pbml0IH0pXG4gIHJldHVybiB7IG11LCBzaWdtYSB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJhdGluZ1xuIiwgImltcG9ydCB7IHNvcnRCeSwgaWRlbnRpdHksIHJhbmdlIH0gZnJvbSAncmFtZGEnXG5pbXBvcnQgeyB1bndpbmQgfSBmcm9tICdzb3J0LXVud2luZCdcblxuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBUZWFtIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgeyBwbGFja2V0dEx1Y2UgfSBmcm9tICcuL21vZGVscydcblxuY29uc3QgcmF0ZSA9ICh0ZWFtczogVGVhbVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pOiBUZWFtW10gPT4ge1xuICBjb25zdCB7IExJTUlUX1NJR01BLCBUQVUgfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICBjb25zdCB7IG1vZGVsID0gcGxhY2tldHRMdWNlIH0gPSBvcHRpb25zXG4gIGxldCBwcm9jZXNzZWRUZWFtcyA9IHRlYW1zXG5cbiAgLy8gaWYgdGF1IGlzIHByb3ZpZGVkLCB1c2UgYWRkaXRpdmUgZHluYW1pY3MgZmFjdG9yIHRvIHByZXZlbnQgc2lnbWEgZnJvbSBkcm9wcGluZyB0b28gbG93LlxuICAvLyB1c2luZyB0aGlzIHdpbGwgZW5zdXJlIHRoZSByYXRpbmcgd2lsbCBzdGF5IG1vcmUgcGxpYWJsZSBhZnRlciBtYW55IGdhbWVzXG4gIGlmIChvcHRpb25zLnRhdSkge1xuICAgIGNvbnN0IHRhdVNxdWFyZWQgPSBUQVUgKiBUQVVcbiAgICBwcm9jZXNzZWRUZWFtcyA9IHRlYW1zLm1hcCgodGVhbSkgPT5cbiAgICAgIHRlYW0ubWFwKChwKSA9PiAoe1xuICAgICAgICAuLi5wLFxuICAgICAgICBzaWdtYTogTWF0aC5zcXJ0KHAuc2lnbWEgKiBwLnNpZ21hICsgdGF1U3F1YXJlZCksXG4gICAgICB9KSlcbiAgICApXG4gIH1cblxuICAvLyBpZiByYW5rIHByb3ZpZGVkLCB1c2UgaXQsIG90aGVyd2lzZSB0cmFuc2l0aW9uIHNjb3JlcyBhbmQgdXNlIHRoYXRcbiAgY29uc3QgcmFuayA9IG9wdGlvbnMucmFuayA/PyBvcHRpb25zLnNjb3JlPy5tYXAoKHBvaW50cykgPT4gLXBvaW50cykgPz8gcmFuZ2UoMSwgdGVhbXMubGVuZ3RoICsgMSlcblxuICBjb25zdCBbb3JkZXJlZFRlYW1zLCB0ZW5ldF0gPSB1bndpbmQocmFuaywgcHJvY2Vzc2VkVGVhbXMpXG4gIGNvbnN0IG5ld1JhdGluZ3MgPSBtb2RlbChvcmRlcmVkVGVhbXMsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIHJhbms6IHNvcnRCeShpZGVudGl0eSwgcmFuayksXG4gIH0pXG4gIGxldCBbcmVvcmRlcmVkVGVhbXNdID0gdW53aW5kKHRlbmV0LCBuZXdSYXRpbmdzKVxuXG4gIC8vIGxpbWl0U2lnbWEgcHJldmVudHMgc2lnbWEgZnJvbSBldmVyIGdvaW5nIHVwIHdoaWNoIGNhbiBoYXBwZW4gd2hlbiB1c2luZyBhIHRhdSB2YWx1ZS5cbiAgLy8gdGhpcyBoZWxwcyBwcmV2ZW50IG9yZGluYWwgZnJvbSBldmVyIGRyb3BwaW5nIGFmdGVyIHdpbm5pbmcgYSBnYW1lIHdoaWNoIGNhbiBmZWVsIHVuZmFpclxuICBpZiAoVEFVICYmIExJTUlUX1NJR01BKSB7XG4gICAgcmVvcmRlcmVkVGVhbXMgPSByZW9yZGVyZWRUZWFtcy5tYXAoKHRlYW06IFJhdGluZ1tdLCBpOiBudW1iZXIpID0+XG4gICAgICB0ZWFtLm1hcCgocCwgaikgPT4gKHtcbiAgICAgICAgLi4ucCxcbiAgICAgICAgc2lnbWE6IE1hdGgubWluKHAuc2lnbWEsIHRlYW1zW2ldW2pdLnNpZ21hKSxcbiAgICAgIH0pKVxuICAgIClcbiAgfVxuXG4gIHJldHVybiByZW9yZGVyZWRUZWFtc1xufVxuXG5leHBvcnQgZGVmYXVsdCByYXRlXG4iLCAiaW1wb3J0IHsgemlwIH0gZnJvbSAncmFtZGEnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBHYW1tYSwgVGVhbSwgUmFuayB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCB0eXBlIFRlYW1NdSA9IG51bWJlclxuXG5leHBvcnQgdHlwZSBUZWFtU2lnbWFTcSA9IG51bWJlclxuXG5leHBvcnQgdHlwZSBUZWFtUmF0aW5nID0gW1RlYW1NdSwgVGVhbVNpZ21hU3EsIFRlYW0sIFJhbmtdXG5cbmV4cG9ydCBjb25zdCBzdW0gPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpID0+IGEgKyBiXG5cbmV4cG9ydCBjb25zdCBzY29yZSA9IChxOiBudW1iZXIsIGk6IG51bWJlcikgPT4ge1xuICBpZiAocSA8IGkpIHtcbiAgICByZXR1cm4gMC4wXG4gIH1cbiAgaWYgKHEgPiBpKSB7XG4gICAgcmV0dXJuIDEuMFxuICB9XG4gIC8vIHEgPT09IGlcbiAgcmV0dXJuIDAuNVxufVxuXG5leHBvcnQgY29uc3QgcmFua2luZ3MgPSAodGVhbXM6IFRlYW1bXSwgcmFuazogbnVtYmVyW10gPSBbXSkgPT4ge1xuICBjb25zdCB0ZWFtU2NvcmVzID0gdGVhbXMubWFwKChfLCBpKSA9PiByYW5rW2ldIHx8IGkpXG4gIGNvbnN0IG91dFJhbmsgPSBuZXcgQXJyYXkodGVhbXMubGVuZ3RoKVxuXG4gIGxldCBzID0gMFxuICBmb3IgKGxldCBqID0gMDsgaiA8IHRlYW1TY29yZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICBpZiAoaiA+IDAgJiYgdGVhbVNjb3Jlc1tqIC0gMV0gPCB0ZWFtU2NvcmVzW2pdKSB7XG4gICAgICBzID0galxuICAgIH1cbiAgICBvdXRSYW5rW2pdID0gc1xuICB9XG4gIHJldHVybiBvdXRSYW5rXG59XG5cbi8vIHRoaXMgaXMgYmFzaWNhbGx5IHNoYXJlZCBjb2RlLCBwcmVjb21wdXRlZCBmb3IgZXZlcnkgbW9kZWxcbmNvbnN0IHRlYW1SYXRpbmcgPVxuICAob3B0aW9uczogT3B0aW9ucykgPT5cbiAgKGdhbWU6IFRlYW1bXSk6IFRlYW1SYXRpbmdbXSA9PiB7XG4gICAgY29uc3QgcmFuayA9IHJhbmtpbmdzKGdhbWUsIG9wdGlvbnMucmFuaylcbiAgICByZXR1cm4gZ2FtZS5tYXAoKHRlYW0sIGkpID0+IFtcbiAgICAgIC8vIG11W2ldXG4gICAgICB0ZWFtLm1hcCgoeyBtdSB9KSA9PiBtdSkucmVkdWNlKHN1bSwgMCksXG4gICAgICAvLyBzaWdtYV4yW2ldXG4gICAgICB0ZWFtLm1hcCgoeyBzaWdtYSB9KSA9PiBzaWdtYSAqIHNpZ21hKS5yZWR1Y2Uoc3VtLCAwKSxcbiAgICAgIC8vIChvcmlnaW5hbCB0ZWFtIGRhdGEpXG4gICAgICB0ZWFtLFxuICAgICAgLy8gcmFua1tpXVxuICAgICAgcmFua1tpXSxcbiAgICBdKVxuICB9XG5cbmV4cG9ydCBjb25zdCBsYWRkZXJQYWlycyA9IDxUPihyYW5rczogVFtdKTogVFtdW10gPT4ge1xuICBjb25zdCBzaXplID0gcmFua3MubGVuZ3RoXG4gIGNvbnN0IGxlZnQgPSBbdW5kZWZpbmVkLCAuLi5yYW5rcy5zbGljZSgwLCBzaXplIC0gMSldXG4gIGNvbnN0IHJpZ2h0ID0gWy4uLnJhbmtzLnNsaWNlKDEpLCB1bmRlZmluZWRdXG4gIHJldHVybiB6aXAobGVmdCwgcmlnaHQpLm1hcCgoW2wsIHJdKSA9PiB7XG4gICAgaWYgKGwgIT09IHVuZGVmaW5lZCAmJiByICE9PSB1bmRlZmluZWQpIHJldHVybiBbbCwgcl1cbiAgICBpZiAobCAhPT0gdW5kZWZpbmVkICYmIHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtsXVxuICAgIGlmIChsID09PSB1bmRlZmluZWQgJiYgciAhPT0gdW5kZWZpbmVkKSByZXR1cm4gW3JdXG4gICAgcmV0dXJuIFtdIC8vIHRoaXMgc2hvdWxkIHJlYWxseSBvbmx5IGhhcHBlbiB3aGVuIHNpemUgPT09IDFcbiAgfSlcbn1cblxuY29uc3QgdXRpbEMgPSAob3B0aW9uczogT3B0aW9ucykgPT4ge1xuICBjb25zdCB7IEJFVEFTUSB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIHJldHVybiAodGVhbVJhdGluZ3M6IFRlYW1SYXRpbmdbXSkgPT5cbiAgICBNYXRoLnNxcnQodGVhbVJhdGluZ3MubWFwKChbX3RlYW1NdSwgdGVhbVNpZ21hU3EsIF90ZWFtLCBfcmFua10pID0+IHRlYW1TaWdtYVNxICsgQkVUQVNRKS5yZWR1Y2Uoc3VtLCAwKSlcbn1cblxuZXhwb3J0IGNvbnN0IHV0aWxTdW1RID0gKHRlYW1SYXRpbmdzOiBUZWFtUmF0aW5nW10sIGM6IG51bWJlcikgPT5cbiAgdGVhbVJhdGluZ3MubWFwKChbX3FNdSwgX3FTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT5cbiAgICB0ZWFtUmF0aW5nc1xuICAgICAgLmZpbHRlcigoW19pTXUsIF9pU2lnbWFTcSwgX2lUZWFtLCBpUmFua10pID0+IGlSYW5rID49IHFSYW5rKVxuICAgICAgLm1hcCgoW2lNdSwgX2lTaWdtYVNxLCBfaVRlYW0sIF9pUmFua10pID0+IE1hdGguZXhwKGlNdSAvIGMpKVxuICAgICAgLnJlZHVjZShzdW0sIDApXG4gIClcblxuZXhwb3J0IGNvbnN0IHV0aWxBID0gKHRlYW1SYXRpbmdzOiBUZWFtUmF0aW5nW10pID0+XG4gIHRlYW1SYXRpbmdzLm1hcChcbiAgICAoW19pTXUsIF9pU2lnbWFTcSwgX2lUZWFtLCBpUmFua10pID0+XG4gICAgICB0ZWFtUmF0aW5ncy5maWx0ZXIoKFtfcU11LCBfcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiBpUmFuayA9PT0gcVJhbmspLmxlbmd0aFxuICApXG5cbmV4cG9ydCBjb25zdCBnYW1tYSA9IChvcHRpb25zOiBPcHRpb25zKTogR2FtbWEgPT5cbiAgb3B0aW9ucy5nYW1tYSA/P1xuICAvLyBkZWZhdWx0IHRvIGlTaWdtYSAvIGNcbiAgKChjOiBudW1iZXIsIF9rOiBudW1iZXIsIF9tdTogbnVtYmVyLCBzaWdtYVNxOiBudW1iZXIsIF90ZWFtOiBSYXRpbmdbXSwgX3FSYW5rOiBudW1iZXIpID0+IE1hdGguc3FydChzaWdtYVNxKSAvIGMpXG5cbmV4cG9ydCBkZWZhdWx0IChvcHRpb25zOiBPcHRpb25zKSA9PiAoe1xuICB1dGlsQzogdXRpbEMob3B0aW9ucyksXG4gIHRlYW1SYXRpbmc6IHRlYW1SYXRpbmcob3B0aW9ucyksXG4gIGdhbW1hOiBnYW1tYShvcHRpb25zKSxcbn0pXG4iLCAiaW1wb3J0IHV0aWwsIHsgdXRpbFN1bVEsIHV0aWxBIH0gZnJvbSAnLi4vdXRpbCdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBNb2RlbCB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBtb2RlbDogTW9kZWwgPSAoZ2FtZTogUmF0aW5nW11bXSwgb3B0aW9uczogT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgRVBTSUxPTiB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIGNvbnN0IHsgdXRpbEMsIHRlYW1SYXRpbmcsIGdhbW1hIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuICBjb25zdCBjID0gdXRpbEModGVhbVJhdGluZ3MpXG4gIGNvbnN0IHN1bVEgPSB1dGlsU3VtUSh0ZWFtUmF0aW5ncywgYylcbiAgY29uc3QgYSA9IHV0aWxBKHRlYW1SYXRpbmdzKVxuXG4gIHJldHVybiB0ZWFtUmF0aW5ncy5tYXAoKGlUZWFtUmF0aW5nLCBpKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IGlNdU92ZXJDZSA9IE1hdGguZXhwKGlNdSAvIGMpIC8vIHRtcDFcbiAgICBjb25zdCBbb21lZ2FTdW0sIGRlbHRhU3VtXSA9IHRlYW1SYXRpbmdzXG4gICAgICAuZmlsdGVyKChbX3FNdSwgX3FTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4gcVJhbmsgPD0gaVJhbmspXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW29tZWdhLCBkZWx0YV0sIFtfXSwgcSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1b3RpZW50ID0gaU11T3ZlckNlIC8gc3VtUVtxXVxuICAgICAgICAgIHJldHVybiBbb21lZ2EgKyAoaSA9PT0gcSA/IDEgLSBxdW90aWVudCA6IC1xdW90aWVudCkgLyBhW3FdLCBkZWx0YSArIChxdW90aWVudCAqICgxIC0gcXVvdGllbnQpKSAvIGFbcV1dXG4gICAgICAgIH0sXG4gICAgICAgIFswLCAwXVxuICAgICAgKVxuXG4gICAgY29uc3QgaUdhbW1hID0gZ2FtbWEoYywgdGVhbVJhdGluZ3MubGVuZ3RoLCAuLi5pVGVhbVJhdGluZylcbiAgICBjb25zdCBpT21lZ2EgPSBvbWVnYVN1bSAqIChpU2lnbWFTcSAvIGMpXG4gICAgY29uc3QgaURlbHRhID0gaUdhbW1hICogZGVsdGFTdW0gKiAoaVNpZ21hU3EgLyBjICoqIDIpXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiAoe1xuICAgICAgbXU6IG11ICsgKHNpZ21hICoqIDIgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICBzaWdtYTogc2lnbWEgKiBNYXRoLnNxcnQoTWF0aC5tYXgoMSAtIChzaWdtYSAqKiAyIC8gaVNpZ21hU3EpICogaURlbHRhLCBFUFNJTE9OKSksXG4gICAgfSkpXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZGVsXG4iLCAiaW1wb3J0IGdhdXNzaWFuIGZyb20gJ2dhdXNzaWFuJ1xuXG4vLyB1c2UgYSBzdGFuZGFyZCBub3JtYWwgZGlzdHJpYnV0aW9uIC0gbWVhbiBvZiB6ZXJvLCBzdGRkZXYvdmFyaWFuY2Ugb2Ygb25lXG5jb25zdCBub3JtYWwgPSBnYXVzc2lhbigwLCAxKVxuXG5leHBvcnQgY29uc3QgcGhpTWFqb3IgPSAoeDogbnVtYmVyKSA9PiBub3JtYWwuY2RmKHgpXG5cbmV4cG9ydCBjb25zdCBwaGlNYWpvckludmVyc2UgPSAoeDogbnVtYmVyKSA9PiBub3JtYWwucHBmKHgpXG5cbmV4cG9ydCBjb25zdCBwaGlNaW5vciA9ICh4OiBudW1iZXIpID0+IG5vcm1hbC5wZGYoeClcblxuZXhwb3J0IGNvbnN0IHYgPSAoeDogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgY29uc3QgeHQgPSB4IC0gdFxuICBjb25zdCBkZW5vbSA9IHBoaU1ham9yKHh0KVxuICByZXR1cm4gZGVub20gPCBOdW1iZXIuRVBTSUxPTiA/IC14dCA6IHBoaU1pbm9yKHh0KSAvIGRlbm9tXG59XG5cbmV4cG9ydCBjb25zdCB3ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh0ID0geCAtIHRcbiAgY29uc3QgZGVub20gPSBwaGlNYWpvcih4dClcbiAgaWYgKGRlbm9tIDwgTnVtYmVyLkVQU0lMT04pIHtcbiAgICByZXR1cm4geCA8IDAgPyAxIDogMFxuICB9XG4gIHJldHVybiB2KHgsIHQpICogKHYoeCwgdCkgKyB4dClcbn1cblxuZXhwb3J0IGNvbnN0IHZ0ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh4ID0gTWF0aC5hYnMoeClcbiAgY29uc3QgYiA9IHBoaU1ham9yKHQgLSB4eCkgLSBwaGlNYWpvcigtdCAtIHh4KVxuICBpZiAoYiA8IDFlLTUpIHtcbiAgICBpZiAoeCA8IDApIHJldHVybiAteCAtIHRcbiAgICByZXR1cm4gLXggKyB0XG4gIH1cbiAgY29uc3QgYSA9IHBoaU1pbm9yKC10IC0geHgpIC0gcGhpTWlub3IodCAtIHh4KVxuICByZXR1cm4gKHggPCAwID8gLWEgOiBhKSAvIGJcbn1cblxuZXhwb3J0IGNvbnN0IHd0ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh4ID0gTWF0aC5hYnMoeClcbiAgY29uc3QgYiA9IHBoaU1ham9yKHQgLSB4eCkgLSBwaGlNYWpvcigtdCAtIHh4KVxuICByZXR1cm4gYiA8IE51bWJlci5FUFNJTE9OXG4gICAgPyAxLjBcbiAgICA6ICgodCAtIHh4KSAqIHBoaU1pbm9yKHQgLSB4eCkgKyAodCArIHh4KSAqIHBoaU1pbm9yKC10IC0geHgpKSAvIGIgKyB2dCh4LCB0KSAqIHZ0KHgsIHQpXG59XG4iLCAiaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IFJhdGluZywgT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IG9yZGluYWwgPSAocmF0aW5nOiBSYXRpbmcsIG9wdGlvbnM6IE9wdGlvbnMgPSB7fSk6IG51bWJlciA9PiB7XG4gIGNvbnN0IHsgc2lnbWEsIG11IH0gPSByYXRpbmdcbiAgY29uc3QgeyBaIH0gPSBjb25zdGFudHMob3B0aW9ucylcbiAgcmV0dXJuIG11IC0gWiAqIHNpZ21hXG59XG5cbmV4cG9ydCBkZWZhdWx0IG9yZGluYWxcbiIsICJpbXBvcnQgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHV0aWwsIHsgc3VtIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgcGhpTWFqb3IgfSBmcm9tICcuL3N0YXRpc3RpY3MnXG5pbXBvcnQgeyBPcHRpb25zLCBUZWFtIH0gZnJvbSAnLi90eXBlcydcblxuY29uc3QgcHJlZGljdFdpbiA9ICh0ZWFtczogVGVhbVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyB0ZWFtUmF0aW5nIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHsgQkVUQVNRIH0gPSBjb25zdGFudHMob3B0aW9ucylcblxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IHRlYW1SYXRpbmcodGVhbXMpXG4gIGNvbnN0IG4gPSB0ZWFtcy5sZW5ndGhcbiAgY29uc3QgZGVub20gPSAobiAqIChuIC0gMSkpIC8gMlxuXG4gIHJldHVybiB0ZWFtUmF0aW5ncy5tYXAoXG4gICAgKFttdUEsIHNpZ21hU3FBXSwgaSkgPT5cbiAgICAgIHRlYW1SYXRpbmdzXG4gICAgICAgIC5maWx0ZXIoKF8sIHEpID0+IGkgIT09IHEpXG4gICAgICAgIC5tYXAoKFttdUIsIHNpZ21hU3FCXSkgPT4gcGhpTWFqb3IoKG11QSAtIG11QikgLyBNYXRoLnNxcnQobiAqIEJFVEFTUSArIHNpZ21hU3FBICsgc2lnbWFTcUIpKSlcbiAgICAgICAgLnJlZHVjZShzdW0sIDApIC8gZGVub21cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVkaWN0V2luXG4iLCAiaW1wb3J0IHsgZmxhdHRlbiwgc3VtLCBtYXAsIGFkZEluZGV4LCByZWR1Y2UsIGhlYWQgfSBmcm9tICdyYW1kYSdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgdXRpbCwgeyBUZWFtUmF0aW5nIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgcGhpTWFqb3IsIHBoaU1ham9ySW52ZXJzZSB9IGZyb20gJy4vc3RhdGlzdGljcydcbmltcG9ydCB7IE9wdGlvbnMsIFRlYW0gfSBmcm9tICcuL3R5cGVzJ1xuXG5jb25zdCBwcmVkaWN0RHJhdyA9ICh0ZWFtczogVGVhbVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pOiBudW1iZXIgPT4ge1xuICBjb25zdCB7IHRlYW1SYXRpbmcgfSA9IHV0aWwob3B0aW9ucylcbiAgY29uc3QgeyBCRVRBU1EsIEJFVEEgfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuXG4gIGNvbnN0IHRvdGFsUGxheWVyQ291bnQgPSBmbGF0dGVuKHRlYW1zKS5sZW5ndGhcbiAgY29uc3QgZHJhd1Byb2JhYmlsaXR5ID0gMSAvIHRvdGFsUGxheWVyQ291bnRcbiAgY29uc3QgZHJhd01hcmdpbiA9IE1hdGguc3FydCh0b3RhbFBsYXllckNvdW50KSAqIEJFVEEgKiBwaGlNYWpvckludmVyc2UoKDEgKyBkcmF3UHJvYmFiaWxpdHkpIC8gMilcblxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IG1hcDxUZWFtLCBUZWFtUmF0aW5nPigodGVhbSkgPT4gaGVhZDxUZWFtUmF0aW5nPih0ZWFtUmF0aW5nKFt0ZWFtXSkpISwgdGVhbXMpXG5cbiAgY29uc3QgcGFpcndpc2VQcm9iczogbnVtYmVyW10gPSBhZGRJbmRleDxUZWFtUmF0aW5nLCBudW1iZXJbXT4ocmVkdWNlPFRlYW1SYXRpbmcsIG51bWJlcltdPikoXG4gICAgKG91dGVyQWNjdW06IG51bWJlcltdLCBwYWlyQTogVGVhbVJhdGluZywgaTogbnVtYmVyKTogbnVtYmVyW10gPT4ge1xuICAgICAgY29uc3QgW211QSwgc2lnbWFTcUFdID0gcGFpckFcbiAgICAgIHJldHVybiByZWR1Y2U8VGVhbVJhdGluZywgbnVtYmVyW10+KFxuICAgICAgICAoaW5uZXJBY2N1bTogbnVtYmVyW10sIHBhaXJCOiBUZWFtUmF0aW5nKTogbnVtYmVyW10gPT4ge1xuICAgICAgICAgIGNvbnN0IFttdUIsIHNpZ21hU3FCXSA9IHBhaXJCXG4gICAgICAgICAgY29uc3Qgc2hhcmVkRGVub20gPSBNYXRoLnNxcnQodG90YWxQbGF5ZXJDb3VudCAqIEJFVEFTUSArIHNpZ21hU3FBICsgc2lnbWFTcUIpXG4gICAgICAgICAgaW5uZXJBY2N1bS5wdXNoKFxuICAgICAgICAgICAgcGhpTWFqb3IoKGRyYXdNYXJnaW4gLSBtdUEgKyBtdUIpIC8gc2hhcmVkRGVub20pIC0gcGhpTWFqb3IoKG11QiAtIG11QSAtIGRyYXdNYXJnaW4pIC8gc2hhcmVkRGVub20pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBpbm5lckFjY3VtXG4gICAgICAgIH0sXG4gICAgICAgIG91dGVyQWNjdW0sXG4gICAgICAgIHRlYW1SYXRpbmdzLnNsaWNlKGkgKyAxKVxuICAgICAgKVxuICAgIH0sXG4gICAgW10sXG4gICAgdGVhbVJhdGluZ3NcbiAgKVxuXG4gIHJldHVybiBzdW0ocGFpcndpc2VQcm9icykgLyBwYWlyd2lzZVByb2JzLmxlbmd0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QU07QUFFOUIsU0FBTyxZQUFZO0FBQUEsSUFDakIsQ0FBQyxDQUFDLEtBQUssUUFBUSxHQUFHLE1BQ2hCLFlBQ0csT0FBTyxDQUFDLEdBQUcsTUFBTSxNQUFNLENBQUMsRUFDeEIsSUFBSSxDQUFDLENBQUMsS0FBSyxRQUFRLE1BQU0sVUFBVSxNQUFNLE9BQU8sS0FBSyxLQUFLLElBQUksU0FBUyxXQUFXLFFBQVEsQ0FBQyxDQUFDLEVBQzVGLE9BQU8sS0FBSyxDQUFDLElBQUk7QUFBQSxFQUN4QjtBQUNGO0FBRUEsSUFBTyxzQkFBUTs7O0FDdEJmLFNBQVMsU0FBUyxPQUFBQyxNQUFLLEtBQUssVUFBVSxRQUFRLFlBQVk7QUFNMUQsSUFBTSxjQUFjLENBQUMsT0FBZSxVQUFtQixDQUFDLE1BQWM7QUFDcEUsUUFBTSxFQUFFLFlBQUFDLFlBQVcsSUFBSSxhQUFLLE9BQU87QUFDbkMsUUFBTSxFQUFFLFFBQVEsS0FBSyxJQUFJLGtCQUFVLE9BQU87QUFFMUMsUUFBTSxtQkFBbUIsUUFBUSxLQUFLLEVBQUU7QUFDeEMsUUFBTSxrQkFBa0IsSUFBSTtBQUM1QixRQUFNLGFBQWEsS0FBSyxLQUFLLGdCQUFnQixJQUFJLE9BQU8saUJBQWlCLElBQUksbUJBQW1CLENBQUM7QUFFakcsUUFBTSxjQUFjLElBQXNCLENBQUMsU0FBUyxLQUFpQkEsWUFBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUksS0FBSztBQUVoRyxRQUFNLGdCQUEwQixTQUErQixNQUE0QjtBQUFBLElBQ3pGLENBQUMsWUFBc0IsT0FBbUIsTUFBd0I7QUFDaEUsWUFBTSxDQUFDLEtBQUssUUFBUSxJQUFJO0FBQ3hCLGFBQU87QUFBQSxRQUNMLENBQUMsWUFBc0IsVUFBZ0M7QUFDckQsZ0JBQU0sQ0FBQyxLQUFLLFFBQVEsSUFBSTtBQUN4QixnQkFBTSxjQUFjLEtBQUssS0FBSyxtQkFBbUIsU0FBUyxXQUFXLFFBQVE7QUFDN0UscUJBQVc7QUFBQSxZQUNULFVBQVUsYUFBYSxNQUFNLE9BQU8sV0FBVyxJQUFJLFVBQVUsTUFBTSxNQUFNLGNBQWMsV0FBVztBQUFBLFVBQ3BHO0FBQ0EsaUJBQU87QUFBQSxRQUNUO0FBQUEsUUFDQTtBQUFBLFFBQ0EsWUFBWSxNQUFNLElBQUksQ0FBQztBQUFBLE1BQ3pCO0FBQUEsSUFDRjtBQUFBLElBQ0EsQ0FBQztBQUFBLElBQ0Q7QUFBQSxFQUNGO0FBRUEsU0FBT0MsS0FBSSxhQUFhLElBQUksY0FBYztBQUM1QztBQUVBLElBQU8sdUJBQVE7IiwKICAibmFtZXMiOiBbInV0aWxDIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAibW9kZWwiLCAicmF0aW5nIiwgInRlYW1SYXRpbmciLCAic3VtIiwgInRlYW1SYXRpbmciLCAic3VtIl0KfQo=