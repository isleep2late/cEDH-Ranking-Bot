// src/util.ts
import { zip } from "ramda";

// src/constants.ts
var builder = (options) => {
  const { z = 3, mu = 25, preventSigmaIncrease = false, epsilon = 1e-4 } = options;
  const { tau = mu / 300, sigma = mu / z, beta = sigma / 2, limitSigma = preventSigmaIncrease } = options;
  const betaSq = beta ** 2;
  return {
    SIGMA: sigma,
    MU: mu,
    EPSILON: epsilon,
    TWOBETASQ: 2 * betaSq,
    BETA: beta,
    BETASQ: betaSq,
    Z: z,
    TAU: tau,
    LIMIT_SIGMA: limitSigma
  };
};
var constants_default = builder;

// src/util.ts
var sum = (a, b) => a + b;
var rankings = (teams, rank = []) => {
  const teamScores = teams.map((_, i) => rank[i] || i);
  const outRank = new Array(teams.length);
  let s = 0;
  for (let j = 0; j < teamScores.length; j += 1) {
    if (j > 0 && teamScores[j - 1] < teamScores[j]) {
      s = j;
    }
    outRank[j] = s;
  }
  return outRank;
};
var teamRating = (options) => (game) => {
  const rank = rankings(game, options.rank);
  return game.map((team, i) => [
    // mu[i]
    team.map(({ mu }) => mu).reduce(sum, 0),
    // sigma^2[i]
    team.map(({ sigma }) => sigma * sigma).reduce(sum, 0),
    // (original team data)
    team,
    // rank[i]
    rank[i]
  ]);
};
var utilC = (options) => {
  const { BETASQ } = constants_default(options);
  return (teamRatings) => Math.sqrt(teamRatings.map(([_teamMu, teamSigmaSq, _team, _rank]) => teamSigmaSq + BETASQ).reduce(sum, 0));
};
var gamma = (options) => {
  var _a;
  return (_a = options.gamma) != null ? _a : (
    // default to iSigma / c
    (c, _k, _mu, sigmaSq, _team, _qRank) => Math.sqrt(sigmaSq) / c
  );
};
var util_default = (options) => ({
  utilC: utilC(options),
  teamRating: teamRating(options),
  gamma: gamma(options)
});

// src/statistics.ts
import gaussian from "gaussian";
var normal = gaussian(0, 1);
var phiMajor = (x) => normal.cdf(x);
var phiMinor = (x) => normal.pdf(x);
var v = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  return denom < Number.EPSILON ? -xt : phiMinor(xt) / denom;
};
var w = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  if (denom < Number.EPSILON) {
    return x < 0 ? 1 : 0;
  }
  return v(x, t) * (v(x, t) + xt);
};
var vt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  if (b < 1e-5) {
    if (x < 0) return -x - t;
    return -x + t;
  }
  const a = phiMinor(-t - xx) - phiMinor(t - xx);
  return (x < 0 ? -a : a) / b;
};
var wt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  return b < Number.EPSILON ? 1 : ((t - xx) * phiMinor(t - xx) + (t + xx) * phiMinor(-t - xx)) / b + vt(x, t) * vt(x, t);
};

// src/models/thurstone-mosteller-full.ts
var model = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = teamRatings.filter((_, q) => i !== q).reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const deltaMu = (iMu - qMu) / ciq;
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        if (qRank === iRank) {
          return [
            omega + sigSqToCiq * vt(deltaMu, EPSILON / ciq),
            delta + iGamma * sigSqToCiq / ciq * wt(deltaMu, EPSILON / ciq)
          ];
        }
        const sign = qRank > iRank ? 1 : -1;
        return [
          omega + sign * sigSqToCiq * v(sign * deltaMu, EPSILON / ciq),
          delta + iGamma * sigSqToCiq / ciq * w(sign * deltaMu, EPSILON / ciq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var thurstone_mosteller_full_default = model;
export {
  thurstone_mosteller_full_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL3V0aWwudHMiLCAiLi4vLi4vc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi9zcmMvc3RhdGlzdGljcy50cyIsICIuLi8uLi9zcmMvbW9kZWxzL3RodXJzdG9uZS1tb3N0ZWxsZXItZnVsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgemlwIH0gZnJvbSAncmFtZGEnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBHYW1tYSwgVGVhbSwgUmFuayB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCB0eXBlIFRlYW1NdSA9IG51bWJlclxuXG5leHBvcnQgdHlwZSBUZWFtU2lnbWFTcSA9IG51bWJlclxuXG5leHBvcnQgdHlwZSBUZWFtUmF0aW5nID0gW1RlYW1NdSwgVGVhbVNpZ21hU3EsIFRlYW0sIFJhbmtdXG5cbmV4cG9ydCBjb25zdCBzdW0gPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpID0+IGEgKyBiXG5cbmV4cG9ydCBjb25zdCBzY29yZSA9IChxOiBudW1iZXIsIGk6IG51bWJlcikgPT4ge1xuICBpZiAocSA8IGkpIHtcbiAgICByZXR1cm4gMC4wXG4gIH1cbiAgaWYgKHEgPiBpKSB7XG4gICAgcmV0dXJuIDEuMFxuICB9XG4gIC8vIHEgPT09IGlcbiAgcmV0dXJuIDAuNVxufVxuXG5leHBvcnQgY29uc3QgcmFua2luZ3MgPSAodGVhbXM6IFRlYW1bXSwgcmFuazogbnVtYmVyW10gPSBbXSkgPT4ge1xuICBjb25zdCB0ZWFtU2NvcmVzID0gdGVhbXMubWFwKChfLCBpKSA9PiByYW5rW2ldIHx8IGkpXG4gIGNvbnN0IG91dFJhbmsgPSBuZXcgQXJyYXkodGVhbXMubGVuZ3RoKVxuXG4gIGxldCBzID0gMFxuICBmb3IgKGxldCBqID0gMDsgaiA8IHRlYW1TY29yZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICBpZiAoaiA+IDAgJiYgdGVhbVNjb3Jlc1tqIC0gMV0gPCB0ZWFtU2NvcmVzW2pdKSB7XG4gICAgICBzID0galxuICAgIH1cbiAgICBvdXRSYW5rW2pdID0gc1xuICB9XG4gIHJldHVybiBvdXRSYW5rXG59XG5cbi8vIHRoaXMgaXMgYmFzaWNhbGx5IHNoYXJlZCBjb2RlLCBwcmVjb21wdXRlZCBmb3IgZXZlcnkgbW9kZWxcbmNvbnN0IHRlYW1SYXRpbmcgPVxuICAob3B0aW9uczogT3B0aW9ucykgPT5cbiAgKGdhbWU6IFRlYW1bXSk6IFRlYW1SYXRpbmdbXSA9PiB7XG4gICAgY29uc3QgcmFuayA9IHJhbmtpbmdzKGdhbWUsIG9wdGlvbnMucmFuaylcbiAgICByZXR1cm4gZ2FtZS5tYXAoKHRlYW0sIGkpID0+IFtcbiAgICAgIC8vIG11W2ldXG4gICAgICB0ZWFtLm1hcCgoeyBtdSB9KSA9PiBtdSkucmVkdWNlKHN1bSwgMCksXG4gICAgICAvLyBzaWdtYV4yW2ldXG4gICAgICB0ZWFtLm1hcCgoeyBzaWdtYSB9KSA9PiBzaWdtYSAqIHNpZ21hKS5yZWR1Y2Uoc3VtLCAwKSxcbiAgICAgIC8vIChvcmlnaW5hbCB0ZWFtIGRhdGEpXG4gICAgICB0ZWFtLFxuICAgICAgLy8gcmFua1tpXVxuICAgICAgcmFua1tpXSxcbiAgICBdKVxuICB9XG5cbmV4cG9ydCBjb25zdCBsYWRkZXJQYWlycyA9IDxUPihyYW5rczogVFtdKTogVFtdW10gPT4ge1xuICBjb25zdCBzaXplID0gcmFua3MubGVuZ3RoXG4gIGNvbnN0IGxlZnQgPSBbdW5kZWZpbmVkLCAuLi5yYW5rcy5zbGljZSgwLCBzaXplIC0gMSldXG4gIGNvbnN0IHJpZ2h0ID0gWy4uLnJhbmtzLnNsaWNlKDEpLCB1bmRlZmluZWRdXG4gIHJldHVybiB6aXAobGVmdCwgcmlnaHQpLm1hcCgoW2wsIHJdKSA9PiB7XG4gICAgaWYgKGwgIT09IHVuZGVmaW5lZCAmJiByICE9PSB1bmRlZmluZWQpIHJldHVybiBbbCwgcl1cbiAgICBpZiAobCAhPT0gdW5kZWZpbmVkICYmIHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtsXVxuICAgIGlmIChsID09PSB1bmRlZmluZWQgJiYgciAhPT0gdW5kZWZpbmVkKSByZXR1cm4gW3JdXG4gICAgcmV0dXJuIFtdIC8vIHRoaXMgc2hvdWxkIHJlYWxseSBvbmx5IGhhcHBlbiB3aGVuIHNpemUgPT09IDFcbiAgfSlcbn1cblxuY29uc3QgdXRpbEMgPSAob3B0aW9uczogT3B0aW9ucykgPT4ge1xuICBjb25zdCB7IEJFVEFTUSB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIHJldHVybiAodGVhbVJhdGluZ3M6IFRlYW1SYXRpbmdbXSkgPT5cbiAgICBNYXRoLnNxcnQodGVhbVJhdGluZ3MubWFwKChbX3RlYW1NdSwgdGVhbVNpZ21hU3EsIF90ZWFtLCBfcmFua10pID0+IHRlYW1TaWdtYVNxICsgQkVUQVNRKS5yZWR1Y2Uoc3VtLCAwKSlcbn1cblxuZXhwb3J0IGNvbnN0IHV0aWxTdW1RID0gKHRlYW1SYXRpbmdzOiBUZWFtUmF0aW5nW10sIGM6IG51bWJlcikgPT5cbiAgdGVhbVJhdGluZ3MubWFwKChbX3FNdSwgX3FTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT5cbiAgICB0ZWFtUmF0aW5nc1xuICAgICAgLmZpbHRlcigoW19pTXUsIF9pU2lnbWFTcSwgX2lUZWFtLCBpUmFua10pID0+IGlSYW5rID49IHFSYW5rKVxuICAgICAgLm1hcCgoW2lNdSwgX2lTaWdtYVNxLCBfaVRlYW0sIF9pUmFua10pID0+IE1hdGguZXhwKGlNdSAvIGMpKVxuICAgICAgLnJlZHVjZShzdW0sIDApXG4gIClcblxuZXhwb3J0IGNvbnN0IHV0aWxBID0gKHRlYW1SYXRpbmdzOiBUZWFtUmF0aW5nW10pID0+XG4gIHRlYW1SYXRpbmdzLm1hcChcbiAgICAoW19pTXUsIF9pU2lnbWFTcSwgX2lUZWFtLCBpUmFua10pID0+XG4gICAgICB0ZWFtUmF0aW5ncy5maWx0ZXIoKFtfcU11LCBfcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiBpUmFuayA9PT0gcVJhbmspLmxlbmd0aFxuICApXG5cbmV4cG9ydCBjb25zdCBnYW1tYSA9IChvcHRpb25zOiBPcHRpb25zKTogR2FtbWEgPT5cbiAgb3B0aW9ucy5nYW1tYSA/P1xuICAvLyBkZWZhdWx0IHRvIGlTaWdtYSAvIGNcbiAgKChjOiBudW1iZXIsIF9rOiBudW1iZXIsIF9tdTogbnVtYmVyLCBzaWdtYVNxOiBudW1iZXIsIF90ZWFtOiBSYXRpbmdbXSwgX3FSYW5rOiBudW1iZXIpID0+IE1hdGguc3FydChzaWdtYVNxKSAvIGMpXG5cbmV4cG9ydCBkZWZhdWx0IChvcHRpb25zOiBPcHRpb25zKSA9PiAoe1xuICB1dGlsQzogdXRpbEMob3B0aW9ucyksXG4gIHRlYW1SYXRpbmc6IHRlYW1SYXRpbmcob3B0aW9ucyksXG4gIGdhbW1hOiBnYW1tYShvcHRpb25zKSxcbn0pXG4iLCAiaW1wb3J0IHsgT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IGJ1aWxkZXIgPSAob3B0aW9uczogT3B0aW9ucykgPT4ge1xuICAvLyBpJ2QgbG92ZSB0byBrbm93IG9mIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzXG4gIGNvbnN0IHsgeiA9IDMsIG11ID0gMjUsIHByZXZlbnRTaWdtYUluY3JlYXNlID0gZmFsc2UsIGVwc2lsb24gPSAwLjAwMDEgfSA9IG9wdGlvbnNcbiAgY29uc3QgeyB0YXUgPSBtdSAvIDMwMCwgc2lnbWEgPSBtdSAvIHosIGJldGEgPSBzaWdtYSAvIDIsIGxpbWl0U2lnbWEgPSBwcmV2ZW50U2lnbWFJbmNyZWFzZSB9ID0gb3B0aW9uc1xuICBjb25zdCBiZXRhU3EgPSBiZXRhICoqIDJcblxuICByZXR1cm4ge1xuICAgIFNJR01BOiBzaWdtYSxcbiAgICBNVTogbXUsXG4gICAgRVBTSUxPTjogZXBzaWxvbixcbiAgICBUV09CRVRBU1E6IDIgKiBiZXRhU3EsXG4gICAgQkVUQTogYmV0YSxcbiAgICBCRVRBU1E6IGJldGFTcSxcbiAgICBaOiB6LFxuICAgIFRBVTogdGF1LFxuICAgIExJTUlUX1NJR01BOiBsaW1pdFNpZ21hLFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJ1aWxkZXJcbiIsICJpbXBvcnQgZ2F1c3NpYW4gZnJvbSAnZ2F1c3NpYW4nXG5cbi8vIHVzZSBhIHN0YW5kYXJkIG5vcm1hbCBkaXN0cmlidXRpb24gLSBtZWFuIG9mIHplcm8sIHN0ZGRldi92YXJpYW5jZSBvZiBvbmVcbmNvbnN0IG5vcm1hbCA9IGdhdXNzaWFuKDAsIDEpXG5cbmV4cG9ydCBjb25zdCBwaGlNYWpvciA9ICh4OiBudW1iZXIpID0+IG5vcm1hbC5jZGYoeClcblxuZXhwb3J0IGNvbnN0IHBoaU1ham9ySW52ZXJzZSA9ICh4OiBudW1iZXIpID0+IG5vcm1hbC5wcGYoeClcblxuZXhwb3J0IGNvbnN0IHBoaU1pbm9yID0gKHg6IG51bWJlcikgPT4gbm9ybWFsLnBkZih4KVxuXG5leHBvcnQgY29uc3QgdiA9ICh4OiBudW1iZXIsIHQ6IG51bWJlcikgPT4ge1xuICBjb25zdCB4dCA9IHggLSB0XG4gIGNvbnN0IGRlbm9tID0gcGhpTWFqb3IoeHQpXG4gIHJldHVybiBkZW5vbSA8IE51bWJlci5FUFNJTE9OID8gLXh0IDogcGhpTWlub3IoeHQpIC8gZGVub21cbn1cblxuZXhwb3J0IGNvbnN0IHcgPSAoeDogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgY29uc3QgeHQgPSB4IC0gdFxuICBjb25zdCBkZW5vbSA9IHBoaU1ham9yKHh0KVxuICBpZiAoZGVub20gPCBOdW1iZXIuRVBTSUxPTikge1xuICAgIHJldHVybiB4IDwgMCA/IDEgOiAwXG4gIH1cbiAgcmV0dXJuIHYoeCwgdCkgKiAodih4LCB0KSArIHh0KVxufVxuXG5leHBvcnQgY29uc3QgdnQgPSAoeDogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgY29uc3QgeHggPSBNYXRoLmFicyh4KVxuICBjb25zdCBiID0gcGhpTWFqb3IodCAtIHh4KSAtIHBoaU1ham9yKC10IC0geHgpXG4gIGlmIChiIDwgMWUtNSkge1xuICAgIGlmICh4IDwgMCkgcmV0dXJuIC14IC0gdFxuICAgIHJldHVybiAteCArIHRcbiAgfVxuICBjb25zdCBhID0gcGhpTWlub3IoLXQgLSB4eCkgLSBwaGlNaW5vcih0IC0geHgpXG4gIHJldHVybiAoeCA8IDAgPyAtYSA6IGEpIC8gYlxufVxuXG5leHBvcnQgY29uc3Qgd3QgPSAoeDogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgY29uc3QgeHggPSBNYXRoLmFicyh4KVxuICBjb25zdCBiID0gcGhpTWFqb3IodCAtIHh4KSAtIHBoaU1ham9yKC10IC0geHgpXG4gIHJldHVybiBiIDwgTnVtYmVyLkVQU0lMT05cbiAgICA/IDEuMFxuICAgIDogKCh0IC0geHgpICogcGhpTWlub3IodCAtIHh4KSArICh0ICsgeHgpICogcGhpTWlub3IoLXQgLSB4eCkpIC8gYiArIHZ0KHgsIHQpICogdnQoeCwgdClcbn1cbiIsICJpbXBvcnQgdXRpbCBmcm9tICcuLi91dGlsJ1xuaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgeyB3LCB2LCB2dCwgd3QgfSBmcm9tICcuLi9zdGF0aXN0aWNzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBNb2RlbCB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBtb2RlbDogTW9kZWwgPSAoZ2FtZTogUmF0aW5nW11bXSwgb3B0aW9uczogT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgVFdPQkVUQVNRLCBFUFNJTE9OIH0gPSBjb25zdGFudHMob3B0aW9ucylcbiAgY29uc3QgeyB0ZWFtUmF0aW5nLCBnYW1tYSB9ID0gdXRpbChvcHRpb25zKVxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IHRlYW1SYXRpbmcoZ2FtZSlcblxuICByZXR1cm4gdGVhbVJhdGluZ3MubWFwKChpVGVhbVJhdGluZywgaSkgPT4ge1xuICAgIGNvbnN0IFtpTXUsIGlTaWdtYVNxLCBpVGVhbSwgaVJhbmtdID0gaVRlYW1SYXRpbmdcbiAgICBjb25zdCBbaU9tZWdhLCBpRGVsdGFdID0gdGVhbVJhdGluZ3NcbiAgICAgIC5maWx0ZXIoKF8sIHEpID0+IGkgIT09IHEpXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW29tZWdhLCBkZWx0YV0sIFtxTXUsIHFTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNpcSA9IE1hdGguc3FydChpU2lnbWFTcSArIHFTaWdtYVNxICsgVFdPQkVUQVNRKVxuICAgICAgICAgIGNvbnN0IGRlbHRhTXUgPSAoaU11IC0gcU11KSAvIGNpcVxuICAgICAgICAgIGNvbnN0IHNpZ1NxVG9DaXEgPSBpU2lnbWFTcSAvIGNpcVxuICAgICAgICAgIGNvbnN0IGlHYW1tYSA9IGdhbW1hKGNpcSwgdGVhbVJhdGluZ3MubGVuZ3RoLCAuLi5pVGVhbVJhdGluZylcblxuICAgICAgICAgIGlmIChxUmFuayA9PT0gaVJhbmspIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgIG9tZWdhICsgc2lnU3FUb0NpcSAqIHZ0KGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgICAgICBkZWx0YSArICgoaUdhbW1hICogc2lnU3FUb0NpcSkgLyBjaXEpICogd3QoZGVsdGFNdSwgRVBTSUxPTiAvIGNpcSksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgc2lnbiA9IHFSYW5rID4gaVJhbmsgPyAxIDogLTFcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb21lZ2EgKyBzaWduICogc2lnU3FUb0NpcSAqIHYoc2lnbiAqIGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgICAgZGVsdGEgKyAoKGlHYW1tYSAqIHNpZ1NxVG9DaXEpIC8gY2lxKSAqIHcoc2lnbiAqIGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgWzAsIDBdXG4gICAgICApXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiB7XG4gICAgICBjb25zdCBzaWdtYVNxID0gc2lnbWEgKiBzaWdtYVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbXU6IG11ICsgKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICAgIHNpZ21hOiBzaWdtYSAqIE1hdGguc3FydChNYXRoLm1heCgxIC0gKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpRGVsdGEsIEVQU0lMT04pKSxcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbFxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUFBLFNBQVMsV0FBVzs7O0FDRXBCLElBQU0sVUFBVSxDQUFDLFlBQXFCO0FBRXBDLFFBQU0sRUFBRSxJQUFJLEdBQUcsS0FBSyxJQUFJLHVCQUF1QixPQUFPLFVBQVUsS0FBTyxJQUFJO0FBQzNFLFFBQU0sRUFBRSxNQUFNLEtBQUssS0FBSyxRQUFRLEtBQUssR0FBRyxPQUFPLFFBQVEsR0FBRyxhQUFhLHFCQUFxQixJQUFJO0FBQ2hHLFFBQU0sU0FBUyxRQUFRO0FBRXZCLFNBQU87QUFBQSxJQUNMLE9BQU87QUFBQSxJQUNQLElBQUk7QUFBQSxJQUNKLFNBQVM7QUFBQSxJQUNULFdBQVcsSUFBSTtBQUFBLElBQ2YsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsR0FBRztBQUFBLElBQ0gsS0FBSztBQUFBLElBQ0wsYUFBYTtBQUFBLEVBQ2Y7QUFDRjtBQUVBLElBQU8sb0JBQVE7OztBRFhSLElBQU0sTUFBTSxDQUFDLEdBQVcsTUFBYyxJQUFJO0FBYTFDLElBQU0sV0FBVyxDQUFDLE9BQWUsT0FBaUIsQ0FBQyxNQUFNO0FBQzlELFFBQU0sYUFBYSxNQUFNLElBQUksQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDLEtBQUssQ0FBQztBQUNuRCxRQUFNLFVBQVUsSUFBSSxNQUFNLE1BQU0sTUFBTTtBQUV0QyxNQUFJLElBQUk7QUFDUixXQUFTLElBQUksR0FBRyxJQUFJLFdBQVcsUUFBUSxLQUFLLEdBQUc7QUFDN0MsUUFBSSxJQUFJLEtBQUssV0FBVyxJQUFJLENBQUMsSUFBSSxXQUFXLENBQUMsR0FBRztBQUM5QyxVQUFJO0FBQUEsSUFDTjtBQUNBLFlBQVEsQ0FBQyxJQUFJO0FBQUEsRUFDZjtBQUNBLFNBQU87QUFDVDtBQUdBLElBQU0sYUFDSixDQUFDLFlBQ0QsQ0FBQyxTQUErQjtBQUM5QixRQUFNLE9BQU8sU0FBUyxNQUFNLFFBQVEsSUFBSTtBQUN4QyxTQUFPLEtBQUssSUFBSSxDQUFDLE1BQU0sTUFBTTtBQUFBO0FBQUEsSUFFM0IsS0FBSyxJQUFJLENBQUMsRUFBRSxHQUFHLE1BQU0sRUFBRSxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQUE7QUFBQSxJQUV0QyxLQUFLLElBQUksQ0FBQyxFQUFFLE1BQU0sTUFBTSxRQUFRLEtBQUssRUFBRSxPQUFPLEtBQUssQ0FBQztBQUFBO0FBQUEsSUFFcEQ7QUFBQTtBQUFBLElBRUEsS0FBSyxDQUFDO0FBQUEsRUFDUixDQUFDO0FBQ0g7QUFjRixJQUFNLFFBQVEsQ0FBQyxZQUFxQjtBQUNsQyxRQUFNLEVBQUUsT0FBTyxJQUFJLGtCQUFVLE9BQU87QUFDcEMsU0FBTyxDQUFDLGdCQUNOLEtBQUssS0FBSyxZQUFZLElBQUksQ0FBQyxDQUFDLFNBQVMsYUFBYSxPQUFPLEtBQUssTUFBTSxjQUFjLE1BQU0sRUFBRSxPQUFPLEtBQUssQ0FBQyxDQUFDO0FBQzVHO0FBZ0JPLElBQU0sUUFBUSxDQUFDLFlBQXlCO0FBdEYvQztBQXVGRSx1QkFBUSxVQUFSO0FBQUE7QUFBQSxJQUVDLENBQUMsR0FBVyxJQUFZLEtBQWEsU0FBaUIsT0FBaUIsV0FBbUIsS0FBSyxLQUFLLE9BQU8sSUFBSTtBQUFBO0FBQUE7QUFFbEgsSUFBTyxlQUFRLENBQUMsYUFBc0I7QUFBQSxFQUNwQyxPQUFPLE1BQU0sT0FBTztBQUFBLEVBQ3BCLFlBQVksV0FBVyxPQUFPO0FBQUEsRUFDOUIsT0FBTyxNQUFNLE9BQU87QUFDdEI7OztBRS9GQSxPQUFPLGNBQWM7QUFHckIsSUFBTSxTQUFTLFNBQVMsR0FBRyxDQUFDO0FBRXJCLElBQU0sV0FBVyxDQUFDLE1BQWMsT0FBTyxJQUFJLENBQUM7QUFJNUMsSUFBTSxXQUFXLENBQUMsTUFBYyxPQUFPLElBQUksQ0FBQztBQUU1QyxJQUFNLElBQUksQ0FBQyxHQUFXLE1BQWM7QUFDekMsUUFBTSxLQUFLLElBQUk7QUFDZixRQUFNLFFBQVEsU0FBUyxFQUFFO0FBQ3pCLFNBQU8sUUFBUSxPQUFPLFVBQVUsQ0FBQyxLQUFLLFNBQVMsRUFBRSxJQUFJO0FBQ3ZEO0FBRU8sSUFBTSxJQUFJLENBQUMsR0FBVyxNQUFjO0FBQ3pDLFFBQU0sS0FBSyxJQUFJO0FBQ2YsUUFBTSxRQUFRLFNBQVMsRUFBRTtBQUN6QixNQUFJLFFBQVEsT0FBTyxTQUFTO0FBQzFCLFdBQU8sSUFBSSxJQUFJLElBQUk7QUFBQSxFQUNyQjtBQUNBLFNBQU8sRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxJQUFJO0FBQzlCO0FBRU8sSUFBTSxLQUFLLENBQUMsR0FBVyxNQUFjO0FBQzFDLFFBQU0sS0FBSyxLQUFLLElBQUksQ0FBQztBQUNyQixRQUFNLElBQUksU0FBUyxJQUFJLEVBQUUsSUFBSSxTQUFTLENBQUMsSUFBSSxFQUFFO0FBQzdDLE1BQUksSUFBSSxNQUFNO0FBQ1osUUFBSSxJQUFJLEVBQUcsUUFBTyxDQUFDLElBQUk7QUFDdkIsV0FBTyxDQUFDLElBQUk7QUFBQSxFQUNkO0FBQ0EsUUFBTSxJQUFJLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxTQUFTLElBQUksRUFBRTtBQUM3QyxVQUFRLElBQUksSUFBSSxDQUFDLElBQUksS0FBSztBQUM1QjtBQUVPLElBQU0sS0FBSyxDQUFDLEdBQVcsTUFBYztBQUMxQyxRQUFNLEtBQUssS0FBSyxJQUFJLENBQUM7QUFDckIsUUFBTSxJQUFJLFNBQVMsSUFBSSxFQUFFLElBQUksU0FBUyxDQUFDLElBQUksRUFBRTtBQUM3QyxTQUFPLElBQUksT0FBTyxVQUNkLE1BQ0UsSUFBSSxNQUFNLFNBQVMsSUFBSSxFQUFFLEtBQUssSUFBSSxNQUFNLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7QUFDM0Y7OztBQ3RDQSxJQUFNLFFBQWUsQ0FBQyxNQUFrQixVQUFtQixDQUFDLE1BQU07QUFDaEUsUUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJLGtCQUFVLE9BQU87QUFDaEQsUUFBTSxFQUFFLFlBQUFBLGFBQVksT0FBQUMsT0FBTSxJQUFJLGFBQUssT0FBTztBQUMxQyxRQUFNLGNBQWNELFlBQVcsSUFBSTtBQUVuQyxTQUFPLFlBQVksSUFBSSxDQUFDLGFBQWEsTUFBTTtBQUN6QyxVQUFNLENBQUMsS0FBSyxVQUFVLE9BQU8sS0FBSyxJQUFJO0FBQ3RDLFVBQU0sQ0FBQyxRQUFRLE1BQU0sSUFBSSxZQUN0QixPQUFPLENBQUMsR0FBRyxNQUFNLE1BQU0sQ0FBQyxFQUN4QjtBQUFBLE1BQ0MsQ0FBQyxDQUFDLE9BQU8sS0FBSyxHQUFHLENBQUMsS0FBSyxVQUFVLFFBQVEsS0FBSyxNQUFNO0FBQ2xELGNBQU0sTUFBTSxLQUFLLEtBQUssV0FBVyxXQUFXLFNBQVM7QUFDckQsY0FBTSxXQUFXLE1BQU0sT0FBTztBQUM5QixjQUFNLGFBQWEsV0FBVztBQUM5QixjQUFNLFNBQVNDLE9BQU0sS0FBSyxZQUFZLFFBQVEsR0FBRyxXQUFXO0FBRTVELFlBQUksVUFBVSxPQUFPO0FBQ25CLGlCQUFPO0FBQUEsWUFDTCxRQUFRLGFBQWEsR0FBRyxTQUFTLFVBQVUsR0FBRztBQUFBLFlBQzlDLFFBQVUsU0FBUyxhQUFjLE1BQU8sR0FBRyxTQUFTLFVBQVUsR0FBRztBQUFBLFVBQ25FO0FBQUEsUUFDRjtBQUVBLGNBQU0sT0FBTyxRQUFRLFFBQVEsSUFBSTtBQUNqQyxlQUFPO0FBQUEsVUFDTCxRQUFRLE9BQU8sYUFBYSxFQUFFLE9BQU8sU0FBUyxVQUFVLEdBQUc7QUFBQSxVQUMzRCxRQUFVLFNBQVMsYUFBYyxNQUFPLEVBQUUsT0FBTyxTQUFTLFVBQVUsR0FBRztBQUFBLFFBQ3pFO0FBQUEsTUFDRjtBQUFBLE1BQ0EsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNQO0FBRUYsV0FBTyxNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxNQUFNO0FBQ2xDLFlBQU0sVUFBVSxRQUFRO0FBQ3hCLGFBQU87QUFBQSxRQUNMLElBQUksS0FBTSxVQUFVLFdBQVk7QUFBQSxRQUNoQyxPQUFPLFFBQVEsS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFLLFVBQVUsV0FBWSxRQUFRLE9BQU8sQ0FBQztBQUFBLE1BQy9FO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSCxDQUFDO0FBQ0g7QUFFQSxJQUFPLG1DQUFROyIsCiAgIm5hbWVzIjogWyJ0ZWFtUmF0aW5nIiwgImdhbW1hIl0KfQo=