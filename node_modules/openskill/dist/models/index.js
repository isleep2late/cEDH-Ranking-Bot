// src/util.ts
import { zip } from "ramda";

// src/constants.ts
var builder = (options) => {
  const { z = 3, mu = 25, preventSigmaIncrease = false, epsilon = 1e-4 } = options;
  const { tau = mu / 300, sigma = mu / z, beta = sigma / 2, limitSigma = preventSigmaIncrease } = options;
  const betaSq = beta ** 2;
  return {
    SIGMA: sigma,
    MU: mu,
    EPSILON: epsilon,
    TWOBETASQ: 2 * betaSq,
    BETA: beta,
    BETASQ: betaSq,
    Z: z,
    TAU: tau,
    LIMIT_SIGMA: limitSigma
  };
};
var constants_default = builder;

// src/util.ts
var sum = (a, b) => a + b;
var score = (q, i) => {
  if (q < i) {
    return 0;
  }
  if (q > i) {
    return 1;
  }
  return 0.5;
};
var rankings = (teams, rank = []) => {
  const teamScores = teams.map((_, i) => rank[i] || i);
  const outRank = new Array(teams.length);
  let s = 0;
  for (let j = 0; j < teamScores.length; j += 1) {
    if (j > 0 && teamScores[j - 1] < teamScores[j]) {
      s = j;
    }
    outRank[j] = s;
  }
  return outRank;
};
var teamRating = (options) => (game) => {
  const rank = rankings(game, options.rank);
  return game.map((team, i) => [
    // mu[i]
    team.map(({ mu }) => mu).reduce(sum, 0),
    // sigma^2[i]
    team.map(({ sigma }) => sigma * sigma).reduce(sum, 0),
    // (original team data)
    team,
    // rank[i]
    rank[i]
  ]);
};
var ladderPairs = (ranks) => {
  const size = ranks.length;
  const left = [void 0, ...ranks.slice(0, size - 1)];
  const right = [...ranks.slice(1), void 0];
  return zip(left, right).map(([l, r]) => {
    if (l !== void 0 && r !== void 0) return [l, r];
    if (l !== void 0 && r === void 0) return [l];
    if (l === void 0 && r !== void 0) return [r];
    return [];
  });
};
var utilC = (options) => {
  const { BETASQ } = constants_default(options);
  return (teamRatings) => Math.sqrt(teamRatings.map(([_teamMu, teamSigmaSq, _team, _rank]) => teamSigmaSq + BETASQ).reduce(sum, 0));
};
var utilSumQ = (teamRatings, c) => teamRatings.map(
  ([_qMu, _qSigmaSq, _qTeam, qRank]) => teamRatings.filter(([_iMu, _iSigmaSq, _iTeam, iRank]) => iRank >= qRank).map(([iMu, _iSigmaSq, _iTeam, _iRank]) => Math.exp(iMu / c)).reduce(sum, 0)
);
var utilA = (teamRatings) => teamRatings.map(
  ([_iMu, _iSigmaSq, _iTeam, iRank]) => teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => iRank === qRank).length
);
var gamma = (options) => {
  var _a;
  return (_a = options.gamma) != null ? _a : (
    // default to iSigma / c
    (c, _k, _mu, sigmaSq, _team, _qRank) => Math.sqrt(sigmaSq) / c
  );
};
var util_default = (options) => ({
  utilC: utilC(options),
  teamRating: teamRating(options),
  gamma: gamma(options)
});

// src/models/plackett-luce.ts
var model = (game, options = {}) => {
  const { EPSILON } = constants_default(options);
  const { utilC: utilC2, teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const c = utilC2(teamRatings);
  const sumQ = utilSumQ(teamRatings, c);
  const a = utilA(teamRatings);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const iMuOverCe = Math.exp(iMu / c);
    const [omegaSum, deltaSum] = teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => qRank <= iRank).reduce(
      ([omega, delta], [_], q) => {
        const quotient = iMuOverCe / sumQ[q];
        return [omega + (i === q ? 1 - quotient : -quotient) / a[q], delta + quotient * (1 - quotient) / a[q]];
      },
      [0, 0]
    );
    const iGamma = gamma2(c, teamRatings.length, ...iTeamRating);
    const iOmega = omegaSum * (iSigmaSq / c);
    const iDelta = iGamma * deltaSum * (iSigmaSq / c ** 2);
    return iTeam.map(({ mu, sigma }) => ({
      mu: mu + sigma ** 2 / iSigmaSq * iOmega,
      sigma: sigma * Math.sqrt(Math.max(1 - sigma ** 2 / iSigmaSq * iDelta, EPSILON))
    }));
  });
};
var plackett_luce_default = model;

// src/models/bradley-terry-full.ts
var model2 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = teamRatings.filter((_, q) => q !== i).reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const piq = 1 / (1 + Math.exp((qMu - iMu) / ciq));
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        return [
          omega + sigSqToCiq * (score(qRank, iRank) - piq),
          delta + iGamma * sigSqToCiq / ciq * piq * (1 - piq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var bradley_terry_full_default = model2;

// src/models/bradley-terry-part.ts
import { zip as zip2 } from "ramda";
var model3 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const adjacentTeams = ladderPairs(teamRatings);
  return zip2(teamRatings, adjacentTeams).map(([iTeamRating, iAdjacents]) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = iAdjacents.reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const piq = 1 / (1 + Math.exp((qMu - iMu) / ciq));
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        return [
          omega + sigSqToCiq * (score(qRank, iRank) - piq),
          delta + iGamma * sigSqToCiq / ciq * piq * (1 - piq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var bradley_terry_part_default = model3;

// src/statistics.ts
import gaussian from "gaussian";
var normal = gaussian(0, 1);
var phiMajor = (x) => normal.cdf(x);
var phiMinor = (x) => normal.pdf(x);
var v = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  return denom < Number.EPSILON ? -xt : phiMinor(xt) / denom;
};
var w = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  if (denom < Number.EPSILON) {
    return x < 0 ? 1 : 0;
  }
  return v(x, t) * (v(x, t) + xt);
};
var vt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  if (b < 1e-5) {
    if (x < 0) return -x - t;
    return -x + t;
  }
  const a = phiMinor(-t - xx) - phiMinor(t - xx);
  return (x < 0 ? -a : a) / b;
};
var wt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  return b < Number.EPSILON ? 1 : ((t - xx) * phiMinor(t - xx) + (t + xx) * phiMinor(-t - xx)) / b + vt(x, t) * vt(x, t);
};

// src/models/thurstone-mosteller-full.ts
var model4 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = teamRatings.filter((_, q) => i !== q).reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const deltaMu = (iMu - qMu) / ciq;
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        if (qRank === iRank) {
          return [
            omega + sigSqToCiq * vt(deltaMu, EPSILON / ciq),
            delta + iGamma * sigSqToCiq / ciq * wt(deltaMu, EPSILON / ciq)
          ];
        }
        const sign = qRank > iRank ? 1 : -1;
        return [
          omega + sign * sigSqToCiq * v(sign * deltaMu, EPSILON / ciq),
          delta + iGamma * sigSqToCiq / ciq * w(sign * deltaMu, EPSILON / ciq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var thurstone_mosteller_full_default = model4;

// src/models/thurstone-mosteller-part.ts
import { zip as zip3 } from "ramda";
var model5 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const adjacentTeams = ladderPairs(teamRatings);
  return zip3(teamRatings, adjacentTeams).map(([iTeamRating, iAdjacents]) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = iAdjacents.reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = 2 * Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const deltaMu = (iMu - qMu) / ciq;
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        if (qRank === iRank) {
          return [
            omega + sigSqToCiq * vt(deltaMu, EPSILON / ciq),
            delta + iGamma * sigSqToCiq / ciq * wt(deltaMu, EPSILON / ciq)
          ];
        }
        const sign = qRank > iRank ? 1 : -1;
        return [
          omega + sign * sigSqToCiq * v(sign * deltaMu, EPSILON / ciq),
          delta + iGamma * sigSqToCiq / ciq * w(sign * deltaMu, EPSILON / ciq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var thurstone_mosteller_part_default = model5;
export {
  bradley_terry_full_default as bradleyTerryFull,
  bradley_terry_part_default as bradleyTerryPart,
  plackett_luce_default as plackettLuce,
  thurstone_mosteller_full_default as thurstoneMostellerFull,
  thurstone_mosteller_part_default as thurstoneMostellerPart
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL3V0aWwudHMiLCAiLi4vLi4vc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi9zcmMvbW9kZWxzL3BsYWNrZXR0LWx1Y2UudHMiLCAiLi4vLi4vc3JjL21vZGVscy9icmFkbGV5LXRlcnJ5LWZ1bGwudHMiLCAiLi4vLi4vc3JjL21vZGVscy9icmFkbGV5LXRlcnJ5LXBhcnQudHMiLCAiLi4vLi4vc3JjL3N0YXRpc3RpY3MudHMiLCAiLi4vLi4vc3JjL21vZGVscy90aHVyc3RvbmUtbW9zdGVsbGVyLWZ1bGwudHMiLCAiLi4vLi4vc3JjL21vZGVscy90aHVyc3RvbmUtbW9zdGVsbGVyLXBhcnQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IHppcCB9IGZyb20gJ3JhbWRhJ1xuaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IFJhdGluZywgT3B0aW9ucywgR2FtbWEsIFRlYW0sIFJhbmsgfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBUZWFtTXUgPSBudW1iZXJcblxuZXhwb3J0IHR5cGUgVGVhbVNpZ21hU3EgPSBudW1iZXJcblxuZXhwb3J0IHR5cGUgVGVhbVJhdGluZyA9IFtUZWFtTXUsIFRlYW1TaWdtYVNxLCBUZWFtLCBSYW5rXVxuXG5leHBvcnQgY29uc3Qgc3VtID0gKGE6IG51bWJlciwgYjogbnVtYmVyKSA9PiBhICsgYlxuXG5leHBvcnQgY29uc3Qgc2NvcmUgPSAocTogbnVtYmVyLCBpOiBudW1iZXIpID0+IHtcbiAgaWYgKHEgPCBpKSB7XG4gICAgcmV0dXJuIDAuMFxuICB9XG4gIGlmIChxID4gaSkge1xuICAgIHJldHVybiAxLjBcbiAgfVxuICAvLyBxID09PSBpXG4gIHJldHVybiAwLjVcbn1cblxuZXhwb3J0IGNvbnN0IHJhbmtpbmdzID0gKHRlYW1zOiBUZWFtW10sIHJhbms6IG51bWJlcltdID0gW10pID0+IHtcbiAgY29uc3QgdGVhbVNjb3JlcyA9IHRlYW1zLm1hcCgoXywgaSkgPT4gcmFua1tpXSB8fCBpKVxuICBjb25zdCBvdXRSYW5rID0gbmV3IEFycmF5KHRlYW1zLmxlbmd0aClcblxuICBsZXQgcyA9IDBcbiAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZWFtU2NvcmVzLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgaWYgKGogPiAwICYmIHRlYW1TY29yZXNbaiAtIDFdIDwgdGVhbVNjb3Jlc1tqXSkge1xuICAgICAgcyA9IGpcbiAgICB9XG4gICAgb3V0UmFua1tqXSA9IHNcbiAgfVxuICByZXR1cm4gb3V0UmFua1xufVxuXG4vLyB0aGlzIGlzIGJhc2ljYWxseSBzaGFyZWQgY29kZSwgcHJlY29tcHV0ZWQgZm9yIGV2ZXJ5IG1vZGVsXG5jb25zdCB0ZWFtUmF0aW5nID1cbiAgKG9wdGlvbnM6IE9wdGlvbnMpID0+XG4gIChnYW1lOiBUZWFtW10pOiBUZWFtUmF0aW5nW10gPT4ge1xuICAgIGNvbnN0IHJhbmsgPSByYW5raW5ncyhnYW1lLCBvcHRpb25zLnJhbmspXG4gICAgcmV0dXJuIGdhbWUubWFwKCh0ZWFtLCBpKSA9PiBbXG4gICAgICAvLyBtdVtpXVxuICAgICAgdGVhbS5tYXAoKHsgbXUgfSkgPT4gbXUpLnJlZHVjZShzdW0sIDApLFxuICAgICAgLy8gc2lnbWFeMltpXVxuICAgICAgdGVhbS5tYXAoKHsgc2lnbWEgfSkgPT4gc2lnbWEgKiBzaWdtYSkucmVkdWNlKHN1bSwgMCksXG4gICAgICAvLyAob3JpZ2luYWwgdGVhbSBkYXRhKVxuICAgICAgdGVhbSxcbiAgICAgIC8vIHJhbmtbaV1cbiAgICAgIHJhbmtbaV0sXG4gICAgXSlcbiAgfVxuXG5leHBvcnQgY29uc3QgbGFkZGVyUGFpcnMgPSA8VD4ocmFua3M6IFRbXSk6IFRbXVtdID0+IHtcbiAgY29uc3Qgc2l6ZSA9IHJhbmtzLmxlbmd0aFxuICBjb25zdCBsZWZ0ID0gW3VuZGVmaW5lZCwgLi4ucmFua3Muc2xpY2UoMCwgc2l6ZSAtIDEpXVxuICBjb25zdCByaWdodCA9IFsuLi5yYW5rcy5zbGljZSgxKSwgdW5kZWZpbmVkXVxuICByZXR1cm4gemlwKGxlZnQsIHJpZ2h0KS5tYXAoKFtsLCByXSkgPT4ge1xuICAgIGlmIChsICE9PSB1bmRlZmluZWQgJiYgciAhPT0gdW5kZWZpbmVkKSByZXR1cm4gW2wsIHJdXG4gICAgaWYgKGwgIT09IHVuZGVmaW5lZCAmJiByID09PSB1bmRlZmluZWQpIHJldHVybiBbbF1cbiAgICBpZiAobCA9PT0gdW5kZWZpbmVkICYmIHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIFtyXVxuICAgIHJldHVybiBbXSAvLyB0aGlzIHNob3VsZCByZWFsbHkgb25seSBoYXBwZW4gd2hlbiBzaXplID09PSAxXG4gIH0pXG59XG5cbmNvbnN0IHV0aWxDID0gKG9wdGlvbnM6IE9wdGlvbnMpID0+IHtcbiAgY29uc3QgeyBCRVRBU1EgfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICByZXR1cm4gKHRlYW1SYXRpbmdzOiBUZWFtUmF0aW5nW10pID0+XG4gICAgTWF0aC5zcXJ0KHRlYW1SYXRpbmdzLm1hcCgoW190ZWFtTXUsIHRlYW1TaWdtYVNxLCBfdGVhbSwgX3JhbmtdKSA9PiB0ZWFtU2lnbWFTcSArIEJFVEFTUSkucmVkdWNlKHN1bSwgMCkpXG59XG5cbmV4cG9ydCBjb25zdCB1dGlsU3VtUSA9ICh0ZWFtUmF0aW5nczogVGVhbVJhdGluZ1tdLCBjOiBudW1iZXIpID0+XG4gIHRlYW1SYXRpbmdzLm1hcCgoW19xTXUsIF9xU2lnbWFTcSwgX3FUZWFtLCBxUmFua10pID0+XG4gICAgdGVhbVJhdGluZ3NcbiAgICAgIC5maWx0ZXIoKFtfaU11LCBfaVNpZ21hU3EsIF9pVGVhbSwgaVJhbmtdKSA9PiBpUmFuayA+PSBxUmFuaylcbiAgICAgIC5tYXAoKFtpTXUsIF9pU2lnbWFTcSwgX2lUZWFtLCBfaVJhbmtdKSA9PiBNYXRoLmV4cChpTXUgLyBjKSlcbiAgICAgIC5yZWR1Y2Uoc3VtLCAwKVxuICApXG5cbmV4cG9ydCBjb25zdCB1dGlsQSA9ICh0ZWFtUmF0aW5nczogVGVhbVJhdGluZ1tdKSA9PlxuICB0ZWFtUmF0aW5ncy5tYXAoXG4gICAgKFtfaU11LCBfaVNpZ21hU3EsIF9pVGVhbSwgaVJhbmtdKSA9PlxuICAgICAgdGVhbVJhdGluZ3MuZmlsdGVyKChbX3FNdSwgX3FTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4gaVJhbmsgPT09IHFSYW5rKS5sZW5ndGhcbiAgKVxuXG5leHBvcnQgY29uc3QgZ2FtbWEgPSAob3B0aW9uczogT3B0aW9ucyk6IEdhbW1hID0+XG4gIG9wdGlvbnMuZ2FtbWEgPz9cbiAgLy8gZGVmYXVsdCB0byBpU2lnbWEgLyBjXG4gICgoYzogbnVtYmVyLCBfazogbnVtYmVyLCBfbXU6IG51bWJlciwgc2lnbWFTcTogbnVtYmVyLCBfdGVhbTogUmF0aW5nW10sIF9xUmFuazogbnVtYmVyKSA9PiBNYXRoLnNxcnQoc2lnbWFTcSkgLyBjKVxuXG5leHBvcnQgZGVmYXVsdCAob3B0aW9uczogT3B0aW9ucykgPT4gKHtcbiAgdXRpbEM6IHV0aWxDKG9wdGlvbnMpLFxuICB0ZWFtUmF0aW5nOiB0ZWFtUmF0aW5nKG9wdGlvbnMpLFxuICBnYW1tYTogZ2FtbWEob3B0aW9ucyksXG59KVxuIiwgImltcG9ydCB7IE9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJ1xuXG5jb25zdCBidWlsZGVyID0gKG9wdGlvbnM6IE9wdGlvbnMpID0+IHtcbiAgLy8gaSdkIGxvdmUgdG8ga25vdyBvZiBhIGJldHRlciB3YXkgdG8gZG8gdGhpc1xuICBjb25zdCB7IHogPSAzLCBtdSA9IDI1LCBwcmV2ZW50U2lnbWFJbmNyZWFzZSA9IGZhbHNlLCBlcHNpbG9uID0gMC4wMDAxIH0gPSBvcHRpb25zXG4gIGNvbnN0IHsgdGF1ID0gbXUgLyAzMDAsIHNpZ21hID0gbXUgLyB6LCBiZXRhID0gc2lnbWEgLyAyLCBsaW1pdFNpZ21hID0gcHJldmVudFNpZ21hSW5jcmVhc2UgfSA9IG9wdGlvbnNcbiAgY29uc3QgYmV0YVNxID0gYmV0YSAqKiAyXG5cbiAgcmV0dXJuIHtcbiAgICBTSUdNQTogc2lnbWEsXG4gICAgTVU6IG11LFxuICAgIEVQU0lMT046IGVwc2lsb24sXG4gICAgVFdPQkVUQVNROiAyICogYmV0YVNxLFxuICAgIEJFVEE6IGJldGEsXG4gICAgQkVUQVNROiBiZXRhU3EsXG4gICAgWjogeixcbiAgICBUQVU6IHRhdSxcbiAgICBMSU1JVF9TSUdNQTogbGltaXRTaWdtYSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBidWlsZGVyXG4iLCAiaW1wb3J0IHV0aWwsIHsgdXRpbFN1bVEsIHV0aWxBIH0gZnJvbSAnLi4vdXRpbCdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBNb2RlbCB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBtb2RlbDogTW9kZWwgPSAoZ2FtZTogUmF0aW5nW11bXSwgb3B0aW9uczogT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgRVBTSUxPTiB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIGNvbnN0IHsgdXRpbEMsIHRlYW1SYXRpbmcsIGdhbW1hIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuICBjb25zdCBjID0gdXRpbEModGVhbVJhdGluZ3MpXG4gIGNvbnN0IHN1bVEgPSB1dGlsU3VtUSh0ZWFtUmF0aW5ncywgYylcbiAgY29uc3QgYSA9IHV0aWxBKHRlYW1SYXRpbmdzKVxuXG4gIHJldHVybiB0ZWFtUmF0aW5ncy5tYXAoKGlUZWFtUmF0aW5nLCBpKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IGlNdU92ZXJDZSA9IE1hdGguZXhwKGlNdSAvIGMpIC8vIHRtcDFcbiAgICBjb25zdCBbb21lZ2FTdW0sIGRlbHRhU3VtXSA9IHRlYW1SYXRpbmdzXG4gICAgICAuZmlsdGVyKChbX3FNdSwgX3FTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4gcVJhbmsgPD0gaVJhbmspXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW29tZWdhLCBkZWx0YV0sIFtfXSwgcSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1b3RpZW50ID0gaU11T3ZlckNlIC8gc3VtUVtxXVxuICAgICAgICAgIHJldHVybiBbb21lZ2EgKyAoaSA9PT0gcSA/IDEgLSBxdW90aWVudCA6IC1xdW90aWVudCkgLyBhW3FdLCBkZWx0YSArIChxdW90aWVudCAqICgxIC0gcXVvdGllbnQpKSAvIGFbcV1dXG4gICAgICAgIH0sXG4gICAgICAgIFswLCAwXVxuICAgICAgKVxuXG4gICAgY29uc3QgaUdhbW1hID0gZ2FtbWEoYywgdGVhbVJhdGluZ3MubGVuZ3RoLCAuLi5pVGVhbVJhdGluZylcbiAgICBjb25zdCBpT21lZ2EgPSBvbWVnYVN1bSAqIChpU2lnbWFTcSAvIGMpXG4gICAgY29uc3QgaURlbHRhID0gaUdhbW1hICogZGVsdGFTdW0gKiAoaVNpZ21hU3EgLyBjICoqIDIpXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiAoe1xuICAgICAgbXU6IG11ICsgKHNpZ21hICoqIDIgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICBzaWdtYTogc2lnbWEgKiBNYXRoLnNxcnQoTWF0aC5tYXgoMSAtIChzaWdtYSAqKiAyIC8gaVNpZ21hU3EpICogaURlbHRhLCBFUFNJTE9OKSksXG4gICAgfSkpXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZGVsXG4iLCAiaW1wb3J0IHV0aWwsIHsgc2NvcmUgfSBmcm9tICcuLi91dGlsJ1xuaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgeyBSYXRpbmcsIE9wdGlvbnMsIE1vZGVsIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmNvbnN0IG1vZGVsOiBNb2RlbCA9IChnYW1lOiBSYXRpbmdbXVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBUV09CRVRBU1EsIEVQU0lMT04gfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICBjb25zdCB7IHRlYW1SYXRpbmcsIGdhbW1hIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuXG4gIHJldHVybiB0ZWFtUmF0aW5ncy5tYXAoKGlUZWFtUmF0aW5nLCBpKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IFtpT21lZ2EsIGlEZWx0YV0gPSB0ZWFtUmF0aW5nc1xuICAgICAgLmZpbHRlcigoXywgcSkgPT4gcSAhPT0gaSlcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChbb21lZ2EsIGRlbHRhXSwgW3FNdSwgcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2lxID0gTWF0aC5zcXJ0KGlTaWdtYVNxICsgcVNpZ21hU3EgKyBUV09CRVRBU1EpXG4gICAgICAgICAgY29uc3QgcGlxID0gMSAvICgxICsgTWF0aC5leHAoKHFNdSAtIGlNdSkgLyBjaXEpKVxuICAgICAgICAgIGNvbnN0IHNpZ1NxVG9DaXEgPSBpU2lnbWFTcSAvIGNpcVxuICAgICAgICAgIGNvbnN0IGlHYW1tYSA9IGdhbW1hKGNpcSwgdGVhbVJhdGluZ3MubGVuZ3RoLCAuLi5pVGVhbVJhdGluZylcblxuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBvbWVnYSArIHNpZ1NxVG9DaXEgKiAoc2NvcmUocVJhbmssIGlSYW5rKSAtIHBpcSksXG4gICAgICAgICAgICBkZWx0YSArICgoaUdhbW1hICogc2lnU3FUb0NpcSkgLyBjaXEpICogcGlxICogKDEgLSBwaXEpLFxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgWzAsIDBdXG4gICAgICApXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiB7XG4gICAgICBjb25zdCBzaWdtYVNxID0gc2lnbWEgKiBzaWdtYVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbXU6IG11ICsgKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICAgIHNpZ21hOiBzaWdtYSAqIE1hdGguc3FydChNYXRoLm1heCgxIC0gKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpRGVsdGEsIEVQU0lMT04pKSxcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbFxuIiwgImltcG9ydCB7IHppcCB9IGZyb20gJ3JhbWRhJ1xuaW1wb3J0IHV0aWwsIHsgc2NvcmUsIGxhZGRlclBhaXJzIH0gZnJvbSAnLi4vdXRpbCdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgTW9kZWwsIFJhdGluZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBtb2RlbDogTW9kZWwgPSAoZ2FtZTogUmF0aW5nW11bXSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgVFdPQkVUQVNRLCBFUFNJTE9OIH0gPSBjb25zdGFudHMob3B0aW9ucylcbiAgY29uc3QgeyB0ZWFtUmF0aW5nLCBnYW1tYSB9ID0gdXRpbChvcHRpb25zKVxuXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuICBjb25zdCBhZGphY2VudFRlYW1zID0gbGFkZGVyUGFpcnModGVhbVJhdGluZ3MpXG5cbiAgcmV0dXJuIHppcCh0ZWFtUmF0aW5ncywgYWRqYWNlbnRUZWFtcykubWFwKChbaVRlYW1SYXRpbmcsIGlBZGphY2VudHNdKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IFtpT21lZ2EsIGlEZWx0YV0gPSBpQWRqYWNlbnRzLnJlZHVjZShcbiAgICAgIChbb21lZ2EsIGRlbHRhXSwgW3FNdSwgcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiB7XG4gICAgICAgIGNvbnN0IGNpcSA9IE1hdGguc3FydChpU2lnbWFTcSArIHFTaWdtYVNxICsgVFdPQkVUQVNRKVxuICAgICAgICBjb25zdCBwaXEgPSAxIC8gKDEgKyBNYXRoLmV4cCgocU11IC0gaU11KSAvIGNpcSkpXG4gICAgICAgIGNvbnN0IHNpZ1NxVG9DaXEgPSBpU2lnbWFTcSAvIGNpcVxuICAgICAgICBjb25zdCBpR2FtbWEgPSBnYW1tYShjaXEsIHRlYW1SYXRpbmdzLmxlbmd0aCwgLi4uaVRlYW1SYXRpbmcpXG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBvbWVnYSArIHNpZ1NxVG9DaXEgKiAoc2NvcmUocVJhbmssIGlSYW5rKSAtIHBpcSksXG4gICAgICAgICAgZGVsdGEgKyAoKGlHYW1tYSAqIHNpZ1NxVG9DaXEpIC8gY2lxKSAqIHBpcSAqICgxIC0gcGlxKSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIFswLCAwXVxuICAgIClcblxuICAgIHJldHVybiBpVGVhbS5tYXAoKHsgbXUsIHNpZ21hIH0pID0+IHtcbiAgICAgIGNvbnN0IHNpZ21hU3EgPSBzaWdtYSAqIHNpZ21hXG4gICAgICByZXR1cm4ge1xuICAgICAgICBtdTogbXUgKyAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlPbWVnYSxcbiAgICAgICAgc2lnbWE6IHNpZ21hICogTWF0aC5zcXJ0KE1hdGgubWF4KDEgLSAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlEZWx0YSwgRVBTSUxPTikpLFxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZGVsXG4iLCAiaW1wb3J0IGdhdXNzaWFuIGZyb20gJ2dhdXNzaWFuJ1xuXG4vLyB1c2UgYSBzdGFuZGFyZCBub3JtYWwgZGlzdHJpYnV0aW9uIC0gbWVhbiBvZiB6ZXJvLCBzdGRkZXYvdmFyaWFuY2Ugb2Ygb25lXG5jb25zdCBub3JtYWwgPSBnYXVzc2lhbigwLCAxKVxuXG5leHBvcnQgY29uc3QgcGhpTWFqb3IgPSAoeDogbnVtYmVyKSA9PiBub3JtYWwuY2RmKHgpXG5cbmV4cG9ydCBjb25zdCBwaGlNYWpvckludmVyc2UgPSAoeDogbnVtYmVyKSA9PiBub3JtYWwucHBmKHgpXG5cbmV4cG9ydCBjb25zdCBwaGlNaW5vciA9ICh4OiBudW1iZXIpID0+IG5vcm1hbC5wZGYoeClcblxuZXhwb3J0IGNvbnN0IHYgPSAoeDogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgY29uc3QgeHQgPSB4IC0gdFxuICBjb25zdCBkZW5vbSA9IHBoaU1ham9yKHh0KVxuICByZXR1cm4gZGVub20gPCBOdW1iZXIuRVBTSUxPTiA/IC14dCA6IHBoaU1pbm9yKHh0KSAvIGRlbm9tXG59XG5cbmV4cG9ydCBjb25zdCB3ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh0ID0geCAtIHRcbiAgY29uc3QgZGVub20gPSBwaGlNYWpvcih4dClcbiAgaWYgKGRlbm9tIDwgTnVtYmVyLkVQU0lMT04pIHtcbiAgICByZXR1cm4geCA8IDAgPyAxIDogMFxuICB9XG4gIHJldHVybiB2KHgsIHQpICogKHYoeCwgdCkgKyB4dClcbn1cblxuZXhwb3J0IGNvbnN0IHZ0ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh4ID0gTWF0aC5hYnMoeClcbiAgY29uc3QgYiA9IHBoaU1ham9yKHQgLSB4eCkgLSBwaGlNYWpvcigtdCAtIHh4KVxuICBpZiAoYiA8IDFlLTUpIHtcbiAgICBpZiAoeCA8IDApIHJldHVybiAteCAtIHRcbiAgICByZXR1cm4gLXggKyB0XG4gIH1cbiAgY29uc3QgYSA9IHBoaU1pbm9yKC10IC0geHgpIC0gcGhpTWlub3IodCAtIHh4KVxuICByZXR1cm4gKHggPCAwID8gLWEgOiBhKSAvIGJcbn1cblxuZXhwb3J0IGNvbnN0IHd0ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh4ID0gTWF0aC5hYnMoeClcbiAgY29uc3QgYiA9IHBoaU1ham9yKHQgLSB4eCkgLSBwaGlNYWpvcigtdCAtIHh4KVxuICByZXR1cm4gYiA8IE51bWJlci5FUFNJTE9OXG4gICAgPyAxLjBcbiAgICA6ICgodCAtIHh4KSAqIHBoaU1pbm9yKHQgLSB4eCkgKyAodCArIHh4KSAqIHBoaU1pbm9yKC10IC0geHgpKSAvIGIgKyB2dCh4LCB0KSAqIHZ0KHgsIHQpXG59XG4iLCAiaW1wb3J0IHV0aWwgZnJvbSAnLi4vdXRpbCdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgdywgdiwgdnQsIHd0IH0gZnJvbSAnLi4vc3RhdGlzdGljcydcbmltcG9ydCB7IFJhdGluZywgT3B0aW9ucywgTW9kZWwgfSBmcm9tICcuLi90eXBlcydcblxuY29uc3QgbW9kZWw6IE1vZGVsID0gKGdhbWU6IFJhdGluZ1tdW10sIG9wdGlvbnM6IE9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IFRXT0JFVEFTUSwgRVBTSUxPTiB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIGNvbnN0IHsgdGVhbVJhdGluZywgZ2FtbWEgfSA9IHV0aWwob3B0aW9ucylcbiAgY29uc3QgdGVhbVJhdGluZ3MgPSB0ZWFtUmF0aW5nKGdhbWUpXG5cbiAgcmV0dXJuIHRlYW1SYXRpbmdzLm1hcCgoaVRlYW1SYXRpbmcsIGkpID0+IHtcbiAgICBjb25zdCBbaU11LCBpU2lnbWFTcSwgaVRlYW0sIGlSYW5rXSA9IGlUZWFtUmF0aW5nXG4gICAgY29uc3QgW2lPbWVnYSwgaURlbHRhXSA9IHRlYW1SYXRpbmdzXG4gICAgICAuZmlsdGVyKChfLCBxKSA9PiBpICE9PSBxKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKFtvbWVnYSwgZGVsdGFdLCBbcU11LCBxU2lnbWFTcSwgX3FUZWFtLCBxUmFua10pID0+IHtcbiAgICAgICAgICBjb25zdCBjaXEgPSBNYXRoLnNxcnQoaVNpZ21hU3EgKyBxU2lnbWFTcSArIFRXT0JFVEFTUSlcbiAgICAgICAgICBjb25zdCBkZWx0YU11ID0gKGlNdSAtIHFNdSkgLyBjaXFcbiAgICAgICAgICBjb25zdCBzaWdTcVRvQ2lxID0gaVNpZ21hU3EgLyBjaXFcbiAgICAgICAgICBjb25zdCBpR2FtbWEgPSBnYW1tYShjaXEsIHRlYW1SYXRpbmdzLmxlbmd0aCwgLi4uaVRlYW1SYXRpbmcpXG5cbiAgICAgICAgICBpZiAocVJhbmsgPT09IGlSYW5rKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICBvbWVnYSArIHNpZ1NxVG9DaXEgKiB2dChkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICAgICAgZGVsdGEgKyAoKGlHYW1tYSAqIHNpZ1NxVG9DaXEpIC8gY2lxKSAqIHd0KGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHNpZ24gPSBxUmFuayA+IGlSYW5rID8gMSA6IC0xXG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG9tZWdhICsgc2lnbiAqIHNpZ1NxVG9DaXEgKiB2KHNpZ24gKiBkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICAgIGRlbHRhICsgKChpR2FtbWEgKiBzaWdTcVRvQ2lxKSAvIGNpcSkgKiB3KHNpZ24gKiBkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIFswLCAwXVxuICAgICAgKVxuXG4gICAgcmV0dXJuIGlUZWFtLm1hcCgoeyBtdSwgc2lnbWEgfSkgPT4ge1xuICAgICAgY29uc3Qgc2lnbWFTcSA9IHNpZ21hICogc2lnbWFcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG11OiBtdSArIChzaWdtYVNxIC8gaVNpZ21hU3EpICogaU9tZWdhLFxuICAgICAgICBzaWdtYTogc2lnbWEgKiBNYXRoLnNxcnQoTWF0aC5tYXgoMSAtIChzaWdtYVNxIC8gaVNpZ21hU3EpICogaURlbHRhLCBFUFNJTE9OKSksXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9kZWxcbiIsICJpbXBvcnQgeyB6aXAgfSBmcm9tICdyYW1kYSdcbmltcG9ydCB1dGlsLCB7IGxhZGRlclBhaXJzIH0gZnJvbSAnLi4vdXRpbCdcbmltcG9ydCB7IHcsIHYsIHZ0LCB3dCB9IGZyb20gJy4uL3N0YXRpc3RpY3MnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCB7IFJhdGluZywgT3B0aW9ucywgTW9kZWwgfSBmcm9tICcuLi90eXBlcydcblxuY29uc3QgbW9kZWw6IE1vZGVsID0gKGdhbWU6IFJhdGluZ1tdW10sIG9wdGlvbnM6IE9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IFRXT0JFVEFTUSwgRVBTSUxPTiB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIGNvbnN0IHsgdGVhbVJhdGluZywgZ2FtbWEgfSA9IHV0aWwob3B0aW9ucylcbiAgY29uc3QgdGVhbVJhdGluZ3MgPSB0ZWFtUmF0aW5nKGdhbWUpXG4gIGNvbnN0IGFkamFjZW50VGVhbXMgPSBsYWRkZXJQYWlycyh0ZWFtUmF0aW5ncylcblxuICByZXR1cm4gemlwKHRlYW1SYXRpbmdzLCBhZGphY2VudFRlYW1zKS5tYXAoKFtpVGVhbVJhdGluZywgaUFkamFjZW50c10pID0+IHtcbiAgICBjb25zdCBbaU11LCBpU2lnbWFTcSwgaVRlYW0sIGlSYW5rXSA9IGlUZWFtUmF0aW5nXG4gICAgY29uc3QgW2lPbWVnYSwgaURlbHRhXSA9IGlBZGphY2VudHMucmVkdWNlKFxuICAgICAgKFtvbWVnYSwgZGVsdGFdLCBbcU11LCBxU2lnbWFTcSwgX3FUZWFtLCBxUmFua10pID0+IHtcbiAgICAgICAgY29uc3QgY2lxID0gMiAqIE1hdGguc3FydChpU2lnbWFTcSArIHFTaWdtYVNxICsgVFdPQkVUQVNRKVxuICAgICAgICBjb25zdCBkZWx0YU11ID0gKGlNdSAtIHFNdSkgLyBjaXFcbiAgICAgICAgY29uc3Qgc2lnU3FUb0NpcSA9IGlTaWdtYVNxIC8gY2lxXG4gICAgICAgIGNvbnN0IGlHYW1tYSA9IGdhbW1hKGNpcSwgdGVhbVJhdGluZ3MubGVuZ3RoLCAuLi5pVGVhbVJhdGluZylcblxuICAgICAgICBpZiAocVJhbmsgPT09IGlSYW5rKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG9tZWdhICsgc2lnU3FUb0NpcSAqIHZ0KGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgICAgZGVsdGEgKyAoKGlHYW1tYSAqIHNpZ1NxVG9DaXEpIC8gY2lxKSAqIHd0KGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgIF1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNpZ24gPSBxUmFuayA+IGlSYW5rID8gMSA6IC0xXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgb21lZ2EgKyBzaWduICogc2lnU3FUb0NpcSAqIHYoc2lnbiAqIGRlbHRhTXUsIEVQU0lMT04gLyBjaXEpLFxuICAgICAgICAgIGRlbHRhICsgKChpR2FtbWEgKiBzaWdTcVRvQ2lxKSAvIGNpcSkgKiB3KHNpZ24gKiBkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIFswLCAwXVxuICAgIClcblxuICAgIHJldHVybiBpVGVhbS5tYXAoKHsgbXUsIHNpZ21hIH0pID0+IHtcbiAgICAgIGNvbnN0IHNpZ21hU3EgPSBzaWdtYSAqIHNpZ21hXG4gICAgICByZXR1cm4ge1xuICAgICAgICBtdTogbXUgKyAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlPbWVnYSxcbiAgICAgICAgc2lnbWE6IHNpZ21hICogTWF0aC5zcXJ0KE1hdGgubWF4KDEgLSAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlEZWx0YSwgRVBTSUxPTikpLFxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZGVsXG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQUEsU0FBUyxXQUFXOzs7QUNFcEIsSUFBTSxVQUFVLENBQUMsWUFBcUI7QUFFcEMsUUFBTSxFQUFFLElBQUksR0FBRyxLQUFLLElBQUksdUJBQXVCLE9BQU8sVUFBVSxLQUFPLElBQUk7QUFDM0UsUUFBTSxFQUFFLE1BQU0sS0FBSyxLQUFLLFFBQVEsS0FBSyxHQUFHLE9BQU8sUUFBUSxHQUFHLGFBQWEscUJBQXFCLElBQUk7QUFDaEcsUUFBTSxTQUFTLFFBQVE7QUFFdkIsU0FBTztBQUFBLElBQ0wsT0FBTztBQUFBLElBQ1AsSUFBSTtBQUFBLElBQ0osU0FBUztBQUFBLElBQ1QsV0FBVyxJQUFJO0FBQUEsSUFDZixNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixHQUFHO0FBQUEsSUFDSCxLQUFLO0FBQUEsSUFDTCxhQUFhO0FBQUEsRUFDZjtBQUNGO0FBRUEsSUFBTyxvQkFBUTs7O0FEWFIsSUFBTSxNQUFNLENBQUMsR0FBVyxNQUFjLElBQUk7QUFFMUMsSUFBTSxRQUFRLENBQUMsR0FBVyxNQUFjO0FBQzdDLE1BQUksSUFBSSxHQUFHO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFDQSxNQUFJLElBQUksR0FBRztBQUNULFdBQU87QUFBQSxFQUNUO0FBRUEsU0FBTztBQUNUO0FBRU8sSUFBTSxXQUFXLENBQUMsT0FBZSxPQUFpQixDQUFDLE1BQU07QUFDOUQsUUFBTSxhQUFhLE1BQU0sSUFBSSxDQUFDLEdBQUcsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ25ELFFBQU0sVUFBVSxJQUFJLE1BQU0sTUFBTSxNQUFNO0FBRXRDLE1BQUksSUFBSTtBQUNSLFdBQVMsSUFBSSxHQUFHLElBQUksV0FBVyxRQUFRLEtBQUssR0FBRztBQUM3QyxRQUFJLElBQUksS0FBSyxXQUFXLElBQUksQ0FBQyxJQUFJLFdBQVcsQ0FBQyxHQUFHO0FBQzlDLFVBQUk7QUFBQSxJQUNOO0FBQ0EsWUFBUSxDQUFDLElBQUk7QUFBQSxFQUNmO0FBQ0EsU0FBTztBQUNUO0FBR0EsSUFBTSxhQUNKLENBQUMsWUFDRCxDQUFDLFNBQStCO0FBQzlCLFFBQU0sT0FBTyxTQUFTLE1BQU0sUUFBUSxJQUFJO0FBQ3hDLFNBQU8sS0FBSyxJQUFJLENBQUMsTUFBTSxNQUFNO0FBQUE7QUFBQSxJQUUzQixLQUFLLElBQUksQ0FBQyxFQUFFLEdBQUcsTUFBTSxFQUFFLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFBQTtBQUFBLElBRXRDLEtBQUssSUFBSSxDQUFDLEVBQUUsTUFBTSxNQUFNLFFBQVEsS0FBSyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQUE7QUFBQSxJQUVwRDtBQUFBO0FBQUEsSUFFQSxLQUFLLENBQUM7QUFBQSxFQUNSLENBQUM7QUFDSDtBQUVLLElBQU0sY0FBYyxDQUFJLFVBQXNCO0FBQ25ELFFBQU0sT0FBTyxNQUFNO0FBQ25CLFFBQU0sT0FBTyxDQUFDLFFBQVcsR0FBRyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsQ0FBQztBQUNwRCxRQUFNLFFBQVEsQ0FBQyxHQUFHLE1BQU0sTUFBTSxDQUFDLEdBQUcsTUFBUztBQUMzQyxTQUFPLElBQUksTUFBTSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU07QUFDdEMsUUFBSSxNQUFNLFVBQWEsTUFBTSxPQUFXLFFBQU8sQ0FBQyxHQUFHLENBQUM7QUFDcEQsUUFBSSxNQUFNLFVBQWEsTUFBTSxPQUFXLFFBQU8sQ0FBQyxDQUFDO0FBQ2pELFFBQUksTUFBTSxVQUFhLE1BQU0sT0FBVyxRQUFPLENBQUMsQ0FBQztBQUNqRCxXQUFPLENBQUM7QUFBQSxFQUNWLENBQUM7QUFDSDtBQUVBLElBQU0sUUFBUSxDQUFDLFlBQXFCO0FBQ2xDLFFBQU0sRUFBRSxPQUFPLElBQUksa0JBQVUsT0FBTztBQUNwQyxTQUFPLENBQUMsZ0JBQ04sS0FBSyxLQUFLLFlBQVksSUFBSSxDQUFDLENBQUMsU0FBUyxhQUFhLE9BQU8sS0FBSyxNQUFNLGNBQWMsTUFBTSxFQUFFLE9BQU8sS0FBSyxDQUFDLENBQUM7QUFDNUc7QUFFTyxJQUFNLFdBQVcsQ0FBQyxhQUEyQixNQUNsRCxZQUFZO0FBQUEsRUFBSSxDQUFDLENBQUMsTUFBTSxXQUFXLFFBQVEsS0FBSyxNQUM5QyxZQUNHLE9BQU8sQ0FBQyxDQUFDLE1BQU0sV0FBVyxRQUFRLEtBQUssTUFBTSxTQUFTLEtBQUssRUFDM0QsSUFBSSxDQUFDLENBQUMsS0FBSyxXQUFXLFFBQVEsTUFBTSxNQUFNLEtBQUssSUFBSSxNQUFNLENBQUMsQ0FBQyxFQUMzRCxPQUFPLEtBQUssQ0FBQztBQUNsQjtBQUVLLElBQU0sUUFBUSxDQUFDLGdCQUNwQixZQUFZO0FBQUEsRUFDVixDQUFDLENBQUMsTUFBTSxXQUFXLFFBQVEsS0FBSyxNQUM5QixZQUFZLE9BQU8sQ0FBQyxDQUFDLE1BQU0sV0FBVyxRQUFRLEtBQUssTUFBTSxVQUFVLEtBQUssRUFBRTtBQUM5RTtBQUVLLElBQU0sUUFBUSxDQUFDLFlBQXlCO0FBdEYvQztBQXVGRSx1QkFBUSxVQUFSO0FBQUE7QUFBQSxJQUVDLENBQUMsR0FBVyxJQUFZLEtBQWEsU0FBaUIsT0FBaUIsV0FBbUIsS0FBSyxLQUFLLE9BQU8sSUFBSTtBQUFBO0FBQUE7QUFFbEgsSUFBTyxlQUFRLENBQUMsYUFBc0I7QUFBQSxFQUNwQyxPQUFPLE1BQU0sT0FBTztBQUFBLEVBQ3BCLFlBQVksV0FBVyxPQUFPO0FBQUEsRUFDOUIsT0FBTyxNQUFNLE9BQU87QUFDdEI7OztBRTNGQSxJQUFNLFFBQWUsQ0FBQyxNQUFrQixVQUFtQixDQUFDLE1BQU07QUFDaEUsUUFBTSxFQUFFLFFBQVEsSUFBSSxrQkFBVSxPQUFPO0FBQ3JDLFFBQU0sRUFBRSxPQUFBQSxRQUFPLFlBQUFDLGFBQVksT0FBQUMsT0FBTSxJQUFJLGFBQUssT0FBTztBQUNqRCxRQUFNLGNBQWNELFlBQVcsSUFBSTtBQUNuQyxRQUFNLElBQUlELE9BQU0sV0FBVztBQUMzQixRQUFNLE9BQU8sU0FBUyxhQUFhLENBQUM7QUFDcEMsUUFBTSxJQUFJLE1BQU0sV0FBVztBQUUzQixTQUFPLFlBQVksSUFBSSxDQUFDLGFBQWEsTUFBTTtBQUN6QyxVQUFNLENBQUMsS0FBSyxVQUFVLE9BQU8sS0FBSyxJQUFJO0FBQ3RDLFVBQU0sWUFBWSxLQUFLLElBQUksTUFBTSxDQUFDO0FBQ2xDLFVBQU0sQ0FBQyxVQUFVLFFBQVEsSUFBSSxZQUMxQixPQUFPLENBQUMsQ0FBQyxNQUFNLFdBQVcsUUFBUSxLQUFLLE1BQU0sU0FBUyxLQUFLLEVBQzNEO0FBQUEsTUFDQyxDQUFDLENBQUMsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTTtBQUMxQixjQUFNLFdBQVcsWUFBWSxLQUFLLENBQUM7QUFDbkMsZUFBTyxDQUFDLFNBQVMsTUFBTSxJQUFJLElBQUksV0FBVyxDQUFDLFlBQVksRUFBRSxDQUFDLEdBQUcsUUFBUyxZQUFZLElBQUksWUFBYSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3pHO0FBQUEsTUFDQSxDQUFDLEdBQUcsQ0FBQztBQUFBLElBQ1A7QUFFRixVQUFNLFNBQVNFLE9BQU0sR0FBRyxZQUFZLFFBQVEsR0FBRyxXQUFXO0FBQzFELFVBQU0sU0FBUyxZQUFZLFdBQVc7QUFDdEMsVUFBTSxTQUFTLFNBQVMsWUFBWSxXQUFXLEtBQUs7QUFFcEQsV0FBTyxNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxPQUFPO0FBQUEsTUFDbkMsSUFBSSxLQUFNLFNBQVMsSUFBSSxXQUFZO0FBQUEsTUFDbkMsT0FBTyxRQUFRLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSyxTQUFTLElBQUksV0FBWSxRQUFRLE9BQU8sQ0FBQztBQUFBLElBQ2xGLEVBQUU7QUFBQSxFQUNKLENBQUM7QUFDSDtBQUVBLElBQU8sd0JBQVE7OztBQ2hDZixJQUFNQyxTQUFlLENBQUMsTUFBa0IsVUFBbUIsQ0FBQyxNQUFNO0FBQ2hFLFFBQU0sRUFBRSxXQUFXLFFBQVEsSUFBSSxrQkFBVSxPQUFPO0FBQ2hELFFBQU0sRUFBRSxZQUFBQyxhQUFZLE9BQUFDLE9BQU0sSUFBSSxhQUFLLE9BQU87QUFDMUMsUUFBTSxjQUFjRCxZQUFXLElBQUk7QUFFbkMsU0FBTyxZQUFZLElBQUksQ0FBQyxhQUFhLE1BQU07QUFDekMsVUFBTSxDQUFDLEtBQUssVUFBVSxPQUFPLEtBQUssSUFBSTtBQUN0QyxVQUFNLENBQUMsUUFBUSxNQUFNLElBQUksWUFDdEIsT0FBTyxDQUFDLEdBQUcsTUFBTSxNQUFNLENBQUMsRUFDeEI7QUFBQSxNQUNDLENBQUMsQ0FBQyxPQUFPLEtBQUssR0FBRyxDQUFDLEtBQUssVUFBVSxRQUFRLEtBQUssTUFBTTtBQUNsRCxjQUFNLE1BQU0sS0FBSyxLQUFLLFdBQVcsV0FBVyxTQUFTO0FBQ3JELGNBQU0sTUFBTSxLQUFLLElBQUksS0FBSyxLQUFLLE1BQU0sT0FBTyxHQUFHO0FBQy9DLGNBQU0sYUFBYSxXQUFXO0FBQzlCLGNBQU0sU0FBU0MsT0FBTSxLQUFLLFlBQVksUUFBUSxHQUFHLFdBQVc7QUFFNUQsZUFBTztBQUFBLFVBQ0wsUUFBUSxjQUFjLE1BQU0sT0FBTyxLQUFLLElBQUk7QUFBQSxVQUM1QyxRQUFVLFNBQVMsYUFBYyxNQUFPLE9BQU8sSUFBSTtBQUFBLFFBQ3JEO0FBQUEsTUFDRjtBQUFBLE1BQ0EsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNQO0FBRUYsV0FBTyxNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxNQUFNO0FBQ2xDLFlBQU0sVUFBVSxRQUFRO0FBQ3hCLGFBQU87QUFBQSxRQUNMLElBQUksS0FBTSxVQUFVLFdBQVk7QUFBQSxRQUNoQyxPQUFPLFFBQVEsS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFLLFVBQVUsV0FBWSxRQUFRLE9BQU8sQ0FBQztBQUFBLE1BQy9FO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSCxDQUFDO0FBQ0g7QUFFQSxJQUFPLDZCQUFRRjs7O0FDdENmLFNBQVMsT0FBQUcsWUFBVztBQUtwQixJQUFNQyxTQUFlLENBQUMsTUFBa0IsVUFBVSxDQUFDLE1BQU07QUFDdkQsUUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJLGtCQUFVLE9BQU87QUFDaEQsUUFBTSxFQUFFLFlBQUFDLGFBQVksT0FBQUMsT0FBTSxJQUFJLGFBQUssT0FBTztBQUUxQyxRQUFNLGNBQWNELFlBQVcsSUFBSTtBQUNuQyxRQUFNLGdCQUFnQixZQUFZLFdBQVc7QUFFN0MsU0FBT0UsS0FBSSxhQUFhLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQyxhQUFhLFVBQVUsTUFBTTtBQUN4RSxVQUFNLENBQUMsS0FBSyxVQUFVLE9BQU8sS0FBSyxJQUFJO0FBQ3RDLFVBQU0sQ0FBQyxRQUFRLE1BQU0sSUFBSSxXQUFXO0FBQUEsTUFDbEMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxHQUFHLENBQUMsS0FBSyxVQUFVLFFBQVEsS0FBSyxNQUFNO0FBQ2xELGNBQU0sTUFBTSxLQUFLLEtBQUssV0FBVyxXQUFXLFNBQVM7QUFDckQsY0FBTSxNQUFNLEtBQUssSUFBSSxLQUFLLEtBQUssTUFBTSxPQUFPLEdBQUc7QUFDL0MsY0FBTSxhQUFhLFdBQVc7QUFDOUIsY0FBTSxTQUFTRCxPQUFNLEtBQUssWUFBWSxRQUFRLEdBQUcsV0FBVztBQUU1RCxlQUFPO0FBQUEsVUFDTCxRQUFRLGNBQWMsTUFBTSxPQUFPLEtBQUssSUFBSTtBQUFBLFVBQzVDLFFBQVUsU0FBUyxhQUFjLE1BQU8sT0FBTyxJQUFJO0FBQUEsUUFDckQ7QUFBQSxNQUNGO0FBQUEsTUFDQSxDQUFDLEdBQUcsQ0FBQztBQUFBLElBQ1A7QUFFQSxXQUFPLE1BQU0sSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLE1BQU07QUFDbEMsWUFBTSxVQUFVLFFBQVE7QUFDeEIsYUFBTztBQUFBLFFBQ0wsSUFBSSxLQUFNLFVBQVUsV0FBWTtBQUFBLFFBQ2hDLE9BQU8sUUFBUSxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUssVUFBVSxXQUFZLFFBQVEsT0FBTyxDQUFDO0FBQUEsTUFDL0U7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNILENBQUM7QUFDSDtBQUVBLElBQU8sNkJBQVFGOzs7QUN2Q2YsT0FBTyxjQUFjO0FBR3JCLElBQU0sU0FBUyxTQUFTLEdBQUcsQ0FBQztBQUVyQixJQUFNLFdBQVcsQ0FBQyxNQUFjLE9BQU8sSUFBSSxDQUFDO0FBSTVDLElBQU0sV0FBVyxDQUFDLE1BQWMsT0FBTyxJQUFJLENBQUM7QUFFNUMsSUFBTSxJQUFJLENBQUMsR0FBVyxNQUFjO0FBQ3pDLFFBQU0sS0FBSyxJQUFJO0FBQ2YsUUFBTSxRQUFRLFNBQVMsRUFBRTtBQUN6QixTQUFPLFFBQVEsT0FBTyxVQUFVLENBQUMsS0FBSyxTQUFTLEVBQUUsSUFBSTtBQUN2RDtBQUVPLElBQU0sSUFBSSxDQUFDLEdBQVcsTUFBYztBQUN6QyxRQUFNLEtBQUssSUFBSTtBQUNmLFFBQU0sUUFBUSxTQUFTLEVBQUU7QUFDekIsTUFBSSxRQUFRLE9BQU8sU0FBUztBQUMxQixXQUFPLElBQUksSUFBSSxJQUFJO0FBQUEsRUFDckI7QUFDQSxTQUFPLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsSUFBSTtBQUM5QjtBQUVPLElBQU0sS0FBSyxDQUFDLEdBQVcsTUFBYztBQUMxQyxRQUFNLEtBQUssS0FBSyxJQUFJLENBQUM7QUFDckIsUUFBTSxJQUFJLFNBQVMsSUFBSSxFQUFFLElBQUksU0FBUyxDQUFDLElBQUksRUFBRTtBQUM3QyxNQUFJLElBQUksTUFBTTtBQUNaLFFBQUksSUFBSSxFQUFHLFFBQU8sQ0FBQyxJQUFJO0FBQ3ZCLFdBQU8sQ0FBQyxJQUFJO0FBQUEsRUFDZDtBQUNBLFFBQU0sSUFBSSxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksU0FBUyxJQUFJLEVBQUU7QUFDN0MsVUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUs7QUFDNUI7QUFFTyxJQUFNLEtBQUssQ0FBQyxHQUFXLE1BQWM7QUFDMUMsUUFBTSxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQ3JCLFFBQU0sSUFBSSxTQUFTLElBQUksRUFBRSxJQUFJLFNBQVMsQ0FBQyxJQUFJLEVBQUU7QUFDN0MsU0FBTyxJQUFJLE9BQU8sVUFDZCxNQUNFLElBQUksTUFBTSxTQUFTLElBQUksRUFBRSxLQUFLLElBQUksTUFBTSxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQzNGOzs7QUN0Q0EsSUFBTUksU0FBZSxDQUFDLE1BQWtCLFVBQW1CLENBQUMsTUFBTTtBQUNoRSxRQUFNLEVBQUUsV0FBVyxRQUFRLElBQUksa0JBQVUsT0FBTztBQUNoRCxRQUFNLEVBQUUsWUFBQUMsYUFBWSxPQUFBQyxPQUFNLElBQUksYUFBSyxPQUFPO0FBQzFDLFFBQU0sY0FBY0QsWUFBVyxJQUFJO0FBRW5DLFNBQU8sWUFBWSxJQUFJLENBQUMsYUFBYSxNQUFNO0FBQ3pDLFVBQU0sQ0FBQyxLQUFLLFVBQVUsT0FBTyxLQUFLLElBQUk7QUFDdEMsVUFBTSxDQUFDLFFBQVEsTUFBTSxJQUFJLFlBQ3RCLE9BQU8sQ0FBQyxHQUFHLE1BQU0sTUFBTSxDQUFDLEVBQ3hCO0FBQUEsTUFDQyxDQUFDLENBQUMsT0FBTyxLQUFLLEdBQUcsQ0FBQyxLQUFLLFVBQVUsUUFBUSxLQUFLLE1BQU07QUFDbEQsY0FBTSxNQUFNLEtBQUssS0FBSyxXQUFXLFdBQVcsU0FBUztBQUNyRCxjQUFNLFdBQVcsTUFBTSxPQUFPO0FBQzlCLGNBQU0sYUFBYSxXQUFXO0FBQzlCLGNBQU0sU0FBU0MsT0FBTSxLQUFLLFlBQVksUUFBUSxHQUFHLFdBQVc7QUFFNUQsWUFBSSxVQUFVLE9BQU87QUFDbkIsaUJBQU87QUFBQSxZQUNMLFFBQVEsYUFBYSxHQUFHLFNBQVMsVUFBVSxHQUFHO0FBQUEsWUFDOUMsUUFBVSxTQUFTLGFBQWMsTUFBTyxHQUFHLFNBQVMsVUFBVSxHQUFHO0FBQUEsVUFDbkU7QUFBQSxRQUNGO0FBRUEsY0FBTSxPQUFPLFFBQVEsUUFBUSxJQUFJO0FBQ2pDLGVBQU87QUFBQSxVQUNMLFFBQVEsT0FBTyxhQUFhLEVBQUUsT0FBTyxTQUFTLFVBQVUsR0FBRztBQUFBLFVBQzNELFFBQVUsU0FBUyxhQUFjLE1BQU8sRUFBRSxPQUFPLFNBQVMsVUFBVSxHQUFHO0FBQUEsUUFDekU7QUFBQSxNQUNGO0FBQUEsTUFDQSxDQUFDLEdBQUcsQ0FBQztBQUFBLElBQ1A7QUFFRixXQUFPLE1BQU0sSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLE1BQU07QUFDbEMsWUFBTSxVQUFVLFFBQVE7QUFDeEIsYUFBTztBQUFBLFFBQ0wsSUFBSSxLQUFNLFVBQVUsV0FBWTtBQUFBLFFBQ2hDLE9BQU8sUUFBUSxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUssVUFBVSxXQUFZLFFBQVEsT0FBTyxDQUFDO0FBQUEsTUFDL0U7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNILENBQUM7QUFDSDtBQUVBLElBQU8sbUNBQVFGOzs7QUMvQ2YsU0FBUyxPQUFBRyxZQUFXO0FBTXBCLElBQU1DLFNBQWUsQ0FBQyxNQUFrQixVQUFtQixDQUFDLE1BQU07QUFDaEUsUUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJLGtCQUFVLE9BQU87QUFDaEQsUUFBTSxFQUFFLFlBQUFDLGFBQVksT0FBQUMsT0FBTSxJQUFJLGFBQUssT0FBTztBQUMxQyxRQUFNLGNBQWNELFlBQVcsSUFBSTtBQUNuQyxRQUFNLGdCQUFnQixZQUFZLFdBQVc7QUFFN0MsU0FBT0UsS0FBSSxhQUFhLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQyxhQUFhLFVBQVUsTUFBTTtBQUN4RSxVQUFNLENBQUMsS0FBSyxVQUFVLE9BQU8sS0FBSyxJQUFJO0FBQ3RDLFVBQU0sQ0FBQyxRQUFRLE1BQU0sSUFBSSxXQUFXO0FBQUEsTUFDbEMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxHQUFHLENBQUMsS0FBSyxVQUFVLFFBQVEsS0FBSyxNQUFNO0FBQ2xELGNBQU0sTUFBTSxJQUFJLEtBQUssS0FBSyxXQUFXLFdBQVcsU0FBUztBQUN6RCxjQUFNLFdBQVcsTUFBTSxPQUFPO0FBQzlCLGNBQU0sYUFBYSxXQUFXO0FBQzlCLGNBQU0sU0FBU0QsT0FBTSxLQUFLLFlBQVksUUFBUSxHQUFHLFdBQVc7QUFFNUQsWUFBSSxVQUFVLE9BQU87QUFDbkIsaUJBQU87QUFBQSxZQUNMLFFBQVEsYUFBYSxHQUFHLFNBQVMsVUFBVSxHQUFHO0FBQUEsWUFDOUMsUUFBVSxTQUFTLGFBQWMsTUFBTyxHQUFHLFNBQVMsVUFBVSxHQUFHO0FBQUEsVUFDbkU7QUFBQSxRQUNGO0FBRUEsY0FBTSxPQUFPLFFBQVEsUUFBUSxJQUFJO0FBQ2pDLGVBQU87QUFBQSxVQUNMLFFBQVEsT0FBTyxhQUFhLEVBQUUsT0FBTyxTQUFTLFVBQVUsR0FBRztBQUFBLFVBQzNELFFBQVUsU0FBUyxhQUFjLE1BQU8sRUFBRSxPQUFPLFNBQVMsVUFBVSxHQUFHO0FBQUEsUUFDekU7QUFBQSxNQUNGO0FBQUEsTUFDQSxDQUFDLEdBQUcsQ0FBQztBQUFBLElBQ1A7QUFFQSxXQUFPLE1BQU0sSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLE1BQU07QUFDbEMsWUFBTSxVQUFVLFFBQVE7QUFDeEIsYUFBTztBQUFBLFFBQ0wsSUFBSSxLQUFNLFVBQVUsV0FBWTtBQUFBLFFBQ2hDLE9BQU8sUUFBUSxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUssVUFBVSxXQUFZLFFBQVEsT0FBTyxDQUFDO0FBQUEsTUFDL0U7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNILENBQUM7QUFDSDtBQUVBLElBQU8sbUNBQVFGOyIsCiAgIm5hbWVzIjogWyJ1dGlsQyIsICJ0ZWFtUmF0aW5nIiwgImdhbW1hIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAiemlwIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAiemlwIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAiemlwIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAiemlwIl0KfQo=