"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/models/index.ts
var models_exports = {};
__export(models_exports, {
  bradleyTerryFull: () => bradley_terry_full_default,
  bradleyTerryPart: () => bradley_terry_part_default,
  plackettLuce: () => plackett_luce_default,
  thurstoneMostellerFull: () => thurstone_mosteller_full_default,
  thurstoneMostellerPart: () => thurstone_mosteller_part_default
});
module.exports = __toCommonJS(models_exports);

// src/util.ts
var import_ramda = require("ramda");

// src/constants.ts
var builder = (options) => {
  const { z = 3, mu = 25, preventSigmaIncrease = false, epsilon = 1e-4 } = options;
  const { tau = mu / 300, sigma = mu / z, beta = sigma / 2, limitSigma = preventSigmaIncrease } = options;
  const betaSq = beta ** 2;
  return {
    SIGMA: sigma,
    MU: mu,
    EPSILON: epsilon,
    TWOBETASQ: 2 * betaSq,
    BETA: beta,
    BETASQ: betaSq,
    Z: z,
    TAU: tau,
    LIMIT_SIGMA: limitSigma
  };
};
var constants_default = builder;

// src/util.ts
var sum = (a, b) => a + b;
var score = (q, i) => {
  if (q < i) {
    return 0;
  }
  if (q > i) {
    return 1;
  }
  return 0.5;
};
var rankings = (teams, rank = []) => {
  const teamScores = teams.map((_, i) => rank[i] || i);
  const outRank = new Array(teams.length);
  let s = 0;
  for (let j = 0; j < teamScores.length; j += 1) {
    if (j > 0 && teamScores[j - 1] < teamScores[j]) {
      s = j;
    }
    outRank[j] = s;
  }
  return outRank;
};
var teamRating = (options) => (game) => {
  const rank = rankings(game, options.rank);
  return game.map((team, i) => [
    // mu[i]
    team.map(({ mu }) => mu).reduce(sum, 0),
    // sigma^2[i]
    team.map(({ sigma }) => sigma * sigma).reduce(sum, 0),
    // (original team data)
    team,
    // rank[i]
    rank[i]
  ]);
};
var ladderPairs = (ranks) => {
  const size = ranks.length;
  const left = [void 0, ...ranks.slice(0, size - 1)];
  const right = [...ranks.slice(1), void 0];
  return (0, import_ramda.zip)(left, right).map(([l, r]) => {
    if (l !== void 0 && r !== void 0) return [l, r];
    if (l !== void 0 && r === void 0) return [l];
    if (l === void 0 && r !== void 0) return [r];
    return [];
  });
};
var utilC = (options) => {
  const { BETASQ } = constants_default(options);
  return (teamRatings) => Math.sqrt(teamRatings.map(([_teamMu, teamSigmaSq, _team, _rank]) => teamSigmaSq + BETASQ).reduce(sum, 0));
};
var utilSumQ = (teamRatings, c) => teamRatings.map(
  ([_qMu, _qSigmaSq, _qTeam, qRank]) => teamRatings.filter(([_iMu, _iSigmaSq, _iTeam, iRank]) => iRank >= qRank).map(([iMu, _iSigmaSq, _iTeam, _iRank]) => Math.exp(iMu / c)).reduce(sum, 0)
);
var utilA = (teamRatings) => teamRatings.map(
  ([_iMu, _iSigmaSq, _iTeam, iRank]) => teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => iRank === qRank).length
);
var gamma = (options) => {
  var _a;
  return (_a = options.gamma) != null ? _a : (
    // default to iSigma / c
    (c, _k, _mu, sigmaSq, _team, _qRank) => Math.sqrt(sigmaSq) / c
  );
};
var util_default = (options) => ({
  utilC: utilC(options),
  teamRating: teamRating(options),
  gamma: gamma(options)
});

// src/models/plackett-luce.ts
var model = (game, options = {}) => {
  const { EPSILON } = constants_default(options);
  const { utilC: utilC2, teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const c = utilC2(teamRatings);
  const sumQ = utilSumQ(teamRatings, c);
  const a = utilA(teamRatings);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const iMuOverCe = Math.exp(iMu / c);
    const [omegaSum, deltaSum] = teamRatings.filter(([_qMu, _qSigmaSq, _qTeam, qRank]) => qRank <= iRank).reduce(
      ([omega, delta], [_], q) => {
        const quotient = iMuOverCe / sumQ[q];
        return [omega + (i === q ? 1 - quotient : -quotient) / a[q], delta + quotient * (1 - quotient) / a[q]];
      },
      [0, 0]
    );
    const iGamma = gamma2(c, teamRatings.length, ...iTeamRating);
    const iOmega = omegaSum * (iSigmaSq / c);
    const iDelta = iGamma * deltaSum * (iSigmaSq / c ** 2);
    return iTeam.map(({ mu, sigma }) => ({
      mu: mu + sigma ** 2 / iSigmaSq * iOmega,
      sigma: sigma * Math.sqrt(Math.max(1 - sigma ** 2 / iSigmaSq * iDelta, EPSILON))
    }));
  });
};
var plackett_luce_default = model;

// src/models/bradley-terry-full.ts
var model2 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = teamRatings.filter((_, q) => q !== i).reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const piq = 1 / (1 + Math.exp((qMu - iMu) / ciq));
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        return [
          omega + sigSqToCiq * (score(qRank, iRank) - piq),
          delta + iGamma * sigSqToCiq / ciq * piq * (1 - piq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var bradley_terry_full_default = model2;

// src/models/bradley-terry-part.ts
var import_ramda2 = require("ramda");
var model3 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const adjacentTeams = ladderPairs(teamRatings);
  return (0, import_ramda2.zip)(teamRatings, adjacentTeams).map(([iTeamRating, iAdjacents]) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = iAdjacents.reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const piq = 1 / (1 + Math.exp((qMu - iMu) / ciq));
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        return [
          omega + sigSqToCiq * (score(qRank, iRank) - piq),
          delta + iGamma * sigSqToCiq / ciq * piq * (1 - piq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var bradley_terry_part_default = model3;

// src/statistics.ts
var import_gaussian = __toESM(require("gaussian"), 1);
var normal = (0, import_gaussian.default)(0, 1);
var phiMajor = (x) => normal.cdf(x);
var phiMinor = (x) => normal.pdf(x);
var v = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  return denom < Number.EPSILON ? -xt : phiMinor(xt) / denom;
};
var w = (x, t) => {
  const xt = x - t;
  const denom = phiMajor(xt);
  if (denom < Number.EPSILON) {
    return x < 0 ? 1 : 0;
  }
  return v(x, t) * (v(x, t) + xt);
};
var vt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  if (b < 1e-5) {
    if (x < 0) return -x - t;
    return -x + t;
  }
  const a = phiMinor(-t - xx) - phiMinor(t - xx);
  return (x < 0 ? -a : a) / b;
};
var wt = (x, t) => {
  const xx = Math.abs(x);
  const b = phiMajor(t - xx) - phiMajor(-t - xx);
  return b < Number.EPSILON ? 1 : ((t - xx) * phiMinor(t - xx) + (t + xx) * phiMinor(-t - xx)) / b + vt(x, t) * vt(x, t);
};

// src/models/thurstone-mosteller-full.ts
var model4 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  return teamRatings.map((iTeamRating, i) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = teamRatings.filter((_, q) => i !== q).reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const deltaMu = (iMu - qMu) / ciq;
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        if (qRank === iRank) {
          return [
            omega + sigSqToCiq * vt(deltaMu, EPSILON / ciq),
            delta + iGamma * sigSqToCiq / ciq * wt(deltaMu, EPSILON / ciq)
          ];
        }
        const sign = qRank > iRank ? 1 : -1;
        return [
          omega + sign * sigSqToCiq * v(sign * deltaMu, EPSILON / ciq),
          delta + iGamma * sigSqToCiq / ciq * w(sign * deltaMu, EPSILON / ciq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var thurstone_mosteller_full_default = model4;

// src/models/thurstone-mosteller-part.ts
var import_ramda3 = require("ramda");
var model5 = (game, options = {}) => {
  const { TWOBETASQ, EPSILON } = constants_default(options);
  const { teamRating: teamRating2, gamma: gamma2 } = util_default(options);
  const teamRatings = teamRating2(game);
  const adjacentTeams = ladderPairs(teamRatings);
  return (0, import_ramda3.zip)(teamRatings, adjacentTeams).map(([iTeamRating, iAdjacents]) => {
    const [iMu, iSigmaSq, iTeam, iRank] = iTeamRating;
    const [iOmega, iDelta] = iAdjacents.reduce(
      ([omega, delta], [qMu, qSigmaSq, _qTeam, qRank]) => {
        const ciq = 2 * Math.sqrt(iSigmaSq + qSigmaSq + TWOBETASQ);
        const deltaMu = (iMu - qMu) / ciq;
        const sigSqToCiq = iSigmaSq / ciq;
        const iGamma = gamma2(ciq, teamRatings.length, ...iTeamRating);
        if (qRank === iRank) {
          return [
            omega + sigSqToCiq * vt(deltaMu, EPSILON / ciq),
            delta + iGamma * sigSqToCiq / ciq * wt(deltaMu, EPSILON / ciq)
          ];
        }
        const sign = qRank > iRank ? 1 : -1;
        return [
          omega + sign * sigSqToCiq * v(sign * deltaMu, EPSILON / ciq),
          delta + iGamma * sigSqToCiq / ciq * w(sign * deltaMu, EPSILON / ciq)
        ];
      },
      [0, 0]
    );
    return iTeam.map(({ mu, sigma }) => {
      const sigmaSq = sigma * sigma;
      return {
        mu: mu + sigmaSq / iSigmaSq * iOmega,
        sigma: sigma * Math.sqrt(Math.max(1 - sigmaSq / iSigmaSq * iDelta, EPSILON))
      };
    });
  });
};
var thurstone_mosteller_part_default = model5;
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  bradleyTerryFull,
  bradleyTerryPart,
  plackettLuce,
  thurstoneMostellerFull,
  thurstoneMostellerPart
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL21vZGVscy9pbmRleC50cyIsICIuLi8uLi9zcmMvdXRpbC50cyIsICIuLi8uLi9zcmMvY29uc3RhbnRzLnRzIiwgIi4uLy4uL3NyYy9tb2RlbHMvcGxhY2tldHQtbHVjZS50cyIsICIuLi8uLi9zcmMvbW9kZWxzL2JyYWRsZXktdGVycnktZnVsbC50cyIsICIuLi8uLi9zcmMvbW9kZWxzL2JyYWRsZXktdGVycnktcGFydC50cyIsICIuLi8uLi9zcmMvc3RhdGlzdGljcy50cyIsICIuLi8uLi9zcmMvbW9kZWxzL3RodXJzdG9uZS1tb3N0ZWxsZXItZnVsbC50cyIsICIuLi8uLi9zcmMvbW9kZWxzL3RodXJzdG9uZS1tb3N0ZWxsZXItcGFydC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IHsgZGVmYXVsdCBhcyBwbGFja2V0dEx1Y2UgfSBmcm9tICcuL3BsYWNrZXR0LWx1Y2UnXG5leHBvcnQgeyBkZWZhdWx0IGFzIGJyYWRsZXlUZXJyeUZ1bGwgfSBmcm9tICcuL2JyYWRsZXktdGVycnktZnVsbCdcbmV4cG9ydCB7IGRlZmF1bHQgYXMgYnJhZGxleVRlcnJ5UGFydCB9IGZyb20gJy4vYnJhZGxleS10ZXJyeS1wYXJ0J1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB0aHVyc3RvbmVNb3N0ZWxsZXJGdWxsIH0gZnJvbSAnLi90aHVyc3RvbmUtbW9zdGVsbGVyLWZ1bGwnXG5leHBvcnQgeyBkZWZhdWx0IGFzIHRodXJzdG9uZU1vc3RlbGxlclBhcnQgfSBmcm9tICcuL3RodXJzdG9uZS1tb3N0ZWxsZXItcGFydCdcbiIsICJpbXBvcnQgeyB6aXAgfSBmcm9tICdyYW1kYSdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgeyBSYXRpbmcsIE9wdGlvbnMsIEdhbW1hLCBUZWFtLCBSYW5rIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IHR5cGUgVGVhbU11ID0gbnVtYmVyXG5cbmV4cG9ydCB0eXBlIFRlYW1TaWdtYVNxID0gbnVtYmVyXG5cbmV4cG9ydCB0eXBlIFRlYW1SYXRpbmcgPSBbVGVhbU11LCBUZWFtU2lnbWFTcSwgVGVhbSwgUmFua11cblxuZXhwb3J0IGNvbnN0IHN1bSA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gYSArIGJcblxuZXhwb3J0IGNvbnN0IHNjb3JlID0gKHE6IG51bWJlciwgaTogbnVtYmVyKSA9PiB7XG4gIGlmIChxIDwgaSkge1xuICAgIHJldHVybiAwLjBcbiAgfVxuICBpZiAocSA+IGkpIHtcbiAgICByZXR1cm4gMS4wXG4gIH1cbiAgLy8gcSA9PT0gaVxuICByZXR1cm4gMC41XG59XG5cbmV4cG9ydCBjb25zdCByYW5raW5ncyA9ICh0ZWFtczogVGVhbVtdLCByYW5rOiBudW1iZXJbXSA9IFtdKSA9PiB7XG4gIGNvbnN0IHRlYW1TY29yZXMgPSB0ZWFtcy5tYXAoKF8sIGkpID0+IHJhbmtbaV0gfHwgaSlcbiAgY29uc3Qgb3V0UmFuayA9IG5ldyBBcnJheSh0ZWFtcy5sZW5ndGgpXG5cbiAgbGV0IHMgPSAwXG4gIGZvciAobGV0IGogPSAwOyBqIDwgdGVhbVNjb3Jlcy5sZW5ndGg7IGogKz0gMSkge1xuICAgIGlmIChqID4gMCAmJiB0ZWFtU2NvcmVzW2ogLSAxXSA8IHRlYW1TY29yZXNbal0pIHtcbiAgICAgIHMgPSBqXG4gICAgfVxuICAgIG91dFJhbmtbal0gPSBzXG4gIH1cbiAgcmV0dXJuIG91dFJhbmtcbn1cblxuLy8gdGhpcyBpcyBiYXNpY2FsbHkgc2hhcmVkIGNvZGUsIHByZWNvbXB1dGVkIGZvciBldmVyeSBtb2RlbFxuY29uc3QgdGVhbVJhdGluZyA9XG4gIChvcHRpb25zOiBPcHRpb25zKSA9PlxuICAoZ2FtZTogVGVhbVtdKTogVGVhbVJhdGluZ1tdID0+IHtcbiAgICBjb25zdCByYW5rID0gcmFua2luZ3MoZ2FtZSwgb3B0aW9ucy5yYW5rKVxuICAgIHJldHVybiBnYW1lLm1hcCgodGVhbSwgaSkgPT4gW1xuICAgICAgLy8gbXVbaV1cbiAgICAgIHRlYW0ubWFwKCh7IG11IH0pID0+IG11KS5yZWR1Y2Uoc3VtLCAwKSxcbiAgICAgIC8vIHNpZ21hXjJbaV1cbiAgICAgIHRlYW0ubWFwKCh7IHNpZ21hIH0pID0+IHNpZ21hICogc2lnbWEpLnJlZHVjZShzdW0sIDApLFxuICAgICAgLy8gKG9yaWdpbmFsIHRlYW0gZGF0YSlcbiAgICAgIHRlYW0sXG4gICAgICAvLyByYW5rW2ldXG4gICAgICByYW5rW2ldLFxuICAgIF0pXG4gIH1cblxuZXhwb3J0IGNvbnN0IGxhZGRlclBhaXJzID0gPFQ+KHJhbmtzOiBUW10pOiBUW11bXSA9PiB7XG4gIGNvbnN0IHNpemUgPSByYW5rcy5sZW5ndGhcbiAgY29uc3QgbGVmdCA9IFt1bmRlZmluZWQsIC4uLnJhbmtzLnNsaWNlKDAsIHNpemUgLSAxKV1cbiAgY29uc3QgcmlnaHQgPSBbLi4ucmFua3Muc2xpY2UoMSksIHVuZGVmaW5lZF1cbiAgcmV0dXJuIHppcChsZWZ0LCByaWdodCkubWFwKChbbCwgcl0pID0+IHtcbiAgICBpZiAobCAhPT0gdW5kZWZpbmVkICYmIHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIFtsLCByXVxuICAgIGlmIChsICE9PSB1bmRlZmluZWQgJiYgciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gW2xdXG4gICAgaWYgKGwgPT09IHVuZGVmaW5lZCAmJiByICE9PSB1bmRlZmluZWQpIHJldHVybiBbcl1cbiAgICByZXR1cm4gW10gLy8gdGhpcyBzaG91bGQgcmVhbGx5IG9ubHkgaGFwcGVuIHdoZW4gc2l6ZSA9PT0gMVxuICB9KVxufVxuXG5jb25zdCB1dGlsQyA9IChvcHRpb25zOiBPcHRpb25zKSA9PiB7XG4gIGNvbnN0IHsgQkVUQVNRIH0gPSBjb25zdGFudHMob3B0aW9ucylcbiAgcmV0dXJuICh0ZWFtUmF0aW5nczogVGVhbVJhdGluZ1tdKSA9PlxuICAgIE1hdGguc3FydCh0ZWFtUmF0aW5ncy5tYXAoKFtfdGVhbU11LCB0ZWFtU2lnbWFTcSwgX3RlYW0sIF9yYW5rXSkgPT4gdGVhbVNpZ21hU3EgKyBCRVRBU1EpLnJlZHVjZShzdW0sIDApKVxufVxuXG5leHBvcnQgY29uc3QgdXRpbFN1bVEgPSAodGVhbVJhdGluZ3M6IFRlYW1SYXRpbmdbXSwgYzogbnVtYmVyKSA9PlxuICB0ZWFtUmF0aW5ncy5tYXAoKFtfcU11LCBfcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PlxuICAgIHRlYW1SYXRpbmdzXG4gICAgICAuZmlsdGVyKChbX2lNdSwgX2lTaWdtYVNxLCBfaVRlYW0sIGlSYW5rXSkgPT4gaVJhbmsgPj0gcVJhbmspXG4gICAgICAubWFwKChbaU11LCBfaVNpZ21hU3EsIF9pVGVhbSwgX2lSYW5rXSkgPT4gTWF0aC5leHAoaU11IC8gYykpXG4gICAgICAucmVkdWNlKHN1bSwgMClcbiAgKVxuXG5leHBvcnQgY29uc3QgdXRpbEEgPSAodGVhbVJhdGluZ3M6IFRlYW1SYXRpbmdbXSkgPT5cbiAgdGVhbVJhdGluZ3MubWFwKFxuICAgIChbX2lNdSwgX2lTaWdtYVNxLCBfaVRlYW0sIGlSYW5rXSkgPT5cbiAgICAgIHRlYW1SYXRpbmdzLmZpbHRlcigoW19xTXUsIF9xU2lnbWFTcSwgX3FUZWFtLCBxUmFua10pID0+IGlSYW5rID09PSBxUmFuaykubGVuZ3RoXG4gIClcblxuZXhwb3J0IGNvbnN0IGdhbW1hID0gKG9wdGlvbnM6IE9wdGlvbnMpOiBHYW1tYSA9PlxuICBvcHRpb25zLmdhbW1hID8/XG4gIC8vIGRlZmF1bHQgdG8gaVNpZ21hIC8gY1xuICAoKGM6IG51bWJlciwgX2s6IG51bWJlciwgX211OiBudW1iZXIsIHNpZ21hU3E6IG51bWJlciwgX3RlYW06IFJhdGluZ1tdLCBfcVJhbms6IG51bWJlcikgPT4gTWF0aC5zcXJ0KHNpZ21hU3EpIC8gYylcblxuZXhwb3J0IGRlZmF1bHQgKG9wdGlvbnM6IE9wdGlvbnMpID0+ICh7XG4gIHV0aWxDOiB1dGlsQyhvcHRpb25zKSxcbiAgdGVhbVJhdGluZzogdGVhbVJhdGluZyhvcHRpb25zKSxcbiAgZ2FtbWE6IGdhbW1hKG9wdGlvbnMpLFxufSlcbiIsICJpbXBvcnQgeyBPcHRpb25zIH0gZnJvbSAnLi90eXBlcydcblxuY29uc3QgYnVpbGRlciA9IChvcHRpb25zOiBPcHRpb25zKSA9PiB7XG4gIC8vIGknZCBsb3ZlIHRvIGtub3cgb2YgYSBiZXR0ZXIgd2F5IHRvIGRvIHRoaXNcbiAgY29uc3QgeyB6ID0gMywgbXUgPSAyNSwgcHJldmVudFNpZ21hSW5jcmVhc2UgPSBmYWxzZSwgZXBzaWxvbiA9IDAuMDAwMSB9ID0gb3B0aW9uc1xuICBjb25zdCB7IHRhdSA9IG11IC8gMzAwLCBzaWdtYSA9IG11IC8geiwgYmV0YSA9IHNpZ21hIC8gMiwgbGltaXRTaWdtYSA9IHByZXZlbnRTaWdtYUluY3JlYXNlIH0gPSBvcHRpb25zXG4gIGNvbnN0IGJldGFTcSA9IGJldGEgKiogMlxuXG4gIHJldHVybiB7XG4gICAgU0lHTUE6IHNpZ21hLFxuICAgIE1VOiBtdSxcbiAgICBFUFNJTE9OOiBlcHNpbG9uLFxuICAgIFRXT0JFVEFTUTogMiAqIGJldGFTcSxcbiAgICBCRVRBOiBiZXRhLFxuICAgIEJFVEFTUTogYmV0YVNxLFxuICAgIFo6IHosXG4gICAgVEFVOiB0YXUsXG4gICAgTElNSVRfU0lHTUE6IGxpbWl0U2lnbWEsXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYnVpbGRlclxuIiwgImltcG9ydCB1dGlsLCB7IHV0aWxTdW1RLCB1dGlsQSB9IGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCB7IFJhdGluZywgT3B0aW9ucywgTW9kZWwgfSBmcm9tICcuLi90eXBlcydcblxuY29uc3QgbW9kZWw6IE1vZGVsID0gKGdhbWU6IFJhdGluZ1tdW10sIG9wdGlvbnM6IE9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IEVQU0lMT04gfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICBjb25zdCB7IHV0aWxDLCB0ZWFtUmF0aW5nLCBnYW1tYSB9ID0gdXRpbChvcHRpb25zKVxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IHRlYW1SYXRpbmcoZ2FtZSlcbiAgY29uc3QgYyA9IHV0aWxDKHRlYW1SYXRpbmdzKVxuICBjb25zdCBzdW1RID0gdXRpbFN1bVEodGVhbVJhdGluZ3MsIGMpXG4gIGNvbnN0IGEgPSB1dGlsQSh0ZWFtUmF0aW5ncylcblxuICByZXR1cm4gdGVhbVJhdGluZ3MubWFwKChpVGVhbVJhdGluZywgaSkgPT4ge1xuICAgIGNvbnN0IFtpTXUsIGlTaWdtYVNxLCBpVGVhbSwgaVJhbmtdID0gaVRlYW1SYXRpbmdcbiAgICBjb25zdCBpTXVPdmVyQ2UgPSBNYXRoLmV4cChpTXUgLyBjKSAvLyB0bXAxXG4gICAgY29uc3QgW29tZWdhU3VtLCBkZWx0YVN1bV0gPSB0ZWFtUmF0aW5nc1xuICAgICAgLmZpbHRlcigoW19xTXUsIF9xU2lnbWFTcSwgX3FUZWFtLCBxUmFua10pID0+IHFSYW5rIDw9IGlSYW5rKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKFtvbWVnYSwgZGVsdGFdLCBbX10sIHEpID0+IHtcbiAgICAgICAgICBjb25zdCBxdW90aWVudCA9IGlNdU92ZXJDZSAvIHN1bVFbcV1cbiAgICAgICAgICByZXR1cm4gW29tZWdhICsgKGkgPT09IHEgPyAxIC0gcXVvdGllbnQgOiAtcXVvdGllbnQpIC8gYVtxXSwgZGVsdGEgKyAocXVvdGllbnQgKiAoMSAtIHF1b3RpZW50KSkgLyBhW3FdXVxuICAgICAgICB9LFxuICAgICAgICBbMCwgMF1cbiAgICAgIClcblxuICAgIGNvbnN0IGlHYW1tYSA9IGdhbW1hKGMsIHRlYW1SYXRpbmdzLmxlbmd0aCwgLi4uaVRlYW1SYXRpbmcpXG4gICAgY29uc3QgaU9tZWdhID0gb21lZ2FTdW0gKiAoaVNpZ21hU3EgLyBjKVxuICAgIGNvbnN0IGlEZWx0YSA9IGlHYW1tYSAqIGRlbHRhU3VtICogKGlTaWdtYVNxIC8gYyAqKiAyKVxuXG4gICAgcmV0dXJuIGlUZWFtLm1hcCgoeyBtdSwgc2lnbWEgfSkgPT4gKHtcbiAgICAgIG11OiBtdSArIChzaWdtYSAqKiAyIC8gaVNpZ21hU3EpICogaU9tZWdhLFxuICAgICAgc2lnbWE6IHNpZ21hICogTWF0aC5zcXJ0KE1hdGgubWF4KDEgLSAoc2lnbWEgKiogMiAvIGlTaWdtYVNxKSAqIGlEZWx0YSwgRVBTSUxPTikpLFxuICAgIH0pKVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbFxuIiwgImltcG9ydCB1dGlsLCB7IHNjb3JlIH0gZnJvbSAnLi4vdXRpbCdcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgUmF0aW5nLCBPcHRpb25zLCBNb2RlbCB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBtb2RlbDogTW9kZWwgPSAoZ2FtZTogUmF0aW5nW11bXSwgb3B0aW9uczogT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgVFdPQkVUQVNRLCBFUFNJTE9OIH0gPSBjb25zdGFudHMob3B0aW9ucylcbiAgY29uc3QgeyB0ZWFtUmF0aW5nLCBnYW1tYSB9ID0gdXRpbChvcHRpb25zKVxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IHRlYW1SYXRpbmcoZ2FtZSlcblxuICByZXR1cm4gdGVhbVJhdGluZ3MubWFwKChpVGVhbVJhdGluZywgaSkgPT4ge1xuICAgIGNvbnN0IFtpTXUsIGlTaWdtYVNxLCBpVGVhbSwgaVJhbmtdID0gaVRlYW1SYXRpbmdcbiAgICBjb25zdCBbaU9tZWdhLCBpRGVsdGFdID0gdGVhbVJhdGluZ3NcbiAgICAgIC5maWx0ZXIoKF8sIHEpID0+IHEgIT09IGkpXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW29tZWdhLCBkZWx0YV0sIFtxTXUsIHFTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNpcSA9IE1hdGguc3FydChpU2lnbWFTcSArIHFTaWdtYVNxICsgVFdPQkVUQVNRKVxuICAgICAgICAgIGNvbnN0IHBpcSA9IDEgLyAoMSArIE1hdGguZXhwKChxTXUgLSBpTXUpIC8gY2lxKSlcbiAgICAgICAgICBjb25zdCBzaWdTcVRvQ2lxID0gaVNpZ21hU3EgLyBjaXFcbiAgICAgICAgICBjb25zdCBpR2FtbWEgPSBnYW1tYShjaXEsIHRlYW1SYXRpbmdzLmxlbmd0aCwgLi4uaVRlYW1SYXRpbmcpXG5cbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb21lZ2EgKyBzaWdTcVRvQ2lxICogKHNjb3JlKHFSYW5rLCBpUmFuaykgLSBwaXEpLFxuICAgICAgICAgICAgZGVsdGEgKyAoKGlHYW1tYSAqIHNpZ1NxVG9DaXEpIC8gY2lxKSAqIHBpcSAqICgxIC0gcGlxKSxcbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIFswLCAwXVxuICAgICAgKVxuXG4gICAgcmV0dXJuIGlUZWFtLm1hcCgoeyBtdSwgc2lnbWEgfSkgPT4ge1xuICAgICAgY29uc3Qgc2lnbWFTcSA9IHNpZ21hICogc2lnbWFcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG11OiBtdSArIChzaWdtYVNxIC8gaVNpZ21hU3EpICogaU9tZWdhLFxuICAgICAgICBzaWdtYTogc2lnbWEgKiBNYXRoLnNxcnQoTWF0aC5tYXgoMSAtIChzaWdtYVNxIC8gaVNpZ21hU3EpICogaURlbHRhLCBFUFNJTE9OKSksXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9kZWxcbiIsICJpbXBvcnQgeyB6aXAgfSBmcm9tICdyYW1kYSdcbmltcG9ydCB1dGlsLCB7IHNjb3JlLCBsYWRkZXJQYWlycyB9IGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCB7IE1vZGVsLCBSYXRpbmcgfSBmcm9tICcuLi90eXBlcydcblxuY29uc3QgbW9kZWw6IE1vZGVsID0gKGdhbWU6IFJhdGluZ1tdW10sIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IFRXT0JFVEFTUSwgRVBTSUxPTiB9ID0gY29uc3RhbnRzKG9wdGlvbnMpXG4gIGNvbnN0IHsgdGVhbVJhdGluZywgZ2FtbWEgfSA9IHV0aWwob3B0aW9ucylcblxuICBjb25zdCB0ZWFtUmF0aW5ncyA9IHRlYW1SYXRpbmcoZ2FtZSlcbiAgY29uc3QgYWRqYWNlbnRUZWFtcyA9IGxhZGRlclBhaXJzKHRlYW1SYXRpbmdzKVxuXG4gIHJldHVybiB6aXAodGVhbVJhdGluZ3MsIGFkamFjZW50VGVhbXMpLm1hcCgoW2lUZWFtUmF0aW5nLCBpQWRqYWNlbnRzXSkgPT4ge1xuICAgIGNvbnN0IFtpTXUsIGlTaWdtYVNxLCBpVGVhbSwgaVJhbmtdID0gaVRlYW1SYXRpbmdcbiAgICBjb25zdCBbaU9tZWdhLCBpRGVsdGFdID0gaUFkamFjZW50cy5yZWR1Y2UoXG4gICAgICAoW29tZWdhLCBkZWx0YV0sIFtxTXUsIHFTaWdtYVNxLCBfcVRlYW0sIHFSYW5rXSkgPT4ge1xuICAgICAgICBjb25zdCBjaXEgPSBNYXRoLnNxcnQoaVNpZ21hU3EgKyBxU2lnbWFTcSArIFRXT0JFVEFTUSlcbiAgICAgICAgY29uc3QgcGlxID0gMSAvICgxICsgTWF0aC5leHAoKHFNdSAtIGlNdSkgLyBjaXEpKVxuICAgICAgICBjb25zdCBzaWdTcVRvQ2lxID0gaVNpZ21hU3EgLyBjaXFcbiAgICAgICAgY29uc3QgaUdhbW1hID0gZ2FtbWEoY2lxLCB0ZWFtUmF0aW5ncy5sZW5ndGgsIC4uLmlUZWFtUmF0aW5nKVxuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgb21lZ2EgKyBzaWdTcVRvQ2lxICogKHNjb3JlKHFSYW5rLCBpUmFuaykgLSBwaXEpLFxuICAgICAgICAgIGRlbHRhICsgKChpR2FtbWEgKiBzaWdTcVRvQ2lxKSAvIGNpcSkgKiBwaXEgKiAoMSAtIHBpcSksXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBbMCwgMF1cbiAgICApXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiB7XG4gICAgICBjb25zdCBzaWdtYVNxID0gc2lnbWEgKiBzaWdtYVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbXU6IG11ICsgKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICAgIHNpZ21hOiBzaWdtYSAqIE1hdGguc3FydChNYXRoLm1heCgxIC0gKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpRGVsdGEsIEVQU0lMT04pKSxcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbFxuIiwgImltcG9ydCBnYXVzc2lhbiBmcm9tICdnYXVzc2lhbidcblxuLy8gdXNlIGEgc3RhbmRhcmQgbm9ybWFsIGRpc3RyaWJ1dGlvbiAtIG1lYW4gb2YgemVybywgc3RkZGV2L3ZhcmlhbmNlIG9mIG9uZVxuY29uc3Qgbm9ybWFsID0gZ2F1c3NpYW4oMCwgMSlcblxuZXhwb3J0IGNvbnN0IHBoaU1ham9yID0gKHg6IG51bWJlcikgPT4gbm9ybWFsLmNkZih4KVxuXG5leHBvcnQgY29uc3QgcGhpTWFqb3JJbnZlcnNlID0gKHg6IG51bWJlcikgPT4gbm9ybWFsLnBwZih4KVxuXG5leHBvcnQgY29uc3QgcGhpTWlub3IgPSAoeDogbnVtYmVyKSA9PiBub3JtYWwucGRmKHgpXG5cbmV4cG9ydCBjb25zdCB2ID0gKHg6IG51bWJlciwgdDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHh0ID0geCAtIHRcbiAgY29uc3QgZGVub20gPSBwaGlNYWpvcih4dClcbiAgcmV0dXJuIGRlbm9tIDwgTnVtYmVyLkVQU0lMT04gPyAteHQgOiBwaGlNaW5vcih4dCkgLyBkZW5vbVxufVxuXG5leHBvcnQgY29uc3QgdyA9ICh4OiBudW1iZXIsIHQ6IG51bWJlcikgPT4ge1xuICBjb25zdCB4dCA9IHggLSB0XG4gIGNvbnN0IGRlbm9tID0gcGhpTWFqb3IoeHQpXG4gIGlmIChkZW5vbSA8IE51bWJlci5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIHggPCAwID8gMSA6IDBcbiAgfVxuICByZXR1cm4gdih4LCB0KSAqICh2KHgsIHQpICsgeHQpXG59XG5cbmV4cG9ydCBjb25zdCB2dCA9ICh4OiBudW1iZXIsIHQ6IG51bWJlcikgPT4ge1xuICBjb25zdCB4eCA9IE1hdGguYWJzKHgpXG4gIGNvbnN0IGIgPSBwaGlNYWpvcih0IC0geHgpIC0gcGhpTWFqb3IoLXQgLSB4eClcbiAgaWYgKGIgPCAxZS01KSB7XG4gICAgaWYgKHggPCAwKSByZXR1cm4gLXggLSB0XG4gICAgcmV0dXJuIC14ICsgdFxuICB9XG4gIGNvbnN0IGEgPSBwaGlNaW5vcigtdCAtIHh4KSAtIHBoaU1pbm9yKHQgLSB4eClcbiAgcmV0dXJuICh4IDwgMCA/IC1hIDogYSkgLyBiXG59XG5cbmV4cG9ydCBjb25zdCB3dCA9ICh4OiBudW1iZXIsIHQ6IG51bWJlcikgPT4ge1xuICBjb25zdCB4eCA9IE1hdGguYWJzKHgpXG4gIGNvbnN0IGIgPSBwaGlNYWpvcih0IC0geHgpIC0gcGhpTWFqb3IoLXQgLSB4eClcbiAgcmV0dXJuIGIgPCBOdW1iZXIuRVBTSUxPTlxuICAgID8gMS4wXG4gICAgOiAoKHQgLSB4eCkgKiBwaGlNaW5vcih0IC0geHgpICsgKHQgKyB4eCkgKiBwaGlNaW5vcigtdCAtIHh4KSkgLyBiICsgdnQoeCwgdCkgKiB2dCh4LCB0KVxufVxuIiwgImltcG9ydCB1dGlsIGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCB7IHcsIHYsIHZ0LCB3dCB9IGZyb20gJy4uL3N0YXRpc3RpY3MnXG5pbXBvcnQgeyBSYXRpbmcsIE9wdGlvbnMsIE1vZGVsIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmNvbnN0IG1vZGVsOiBNb2RlbCA9IChnYW1lOiBSYXRpbmdbXVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBUV09CRVRBU1EsIEVQU0lMT04gfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICBjb25zdCB7IHRlYW1SYXRpbmcsIGdhbW1hIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuXG4gIHJldHVybiB0ZWFtUmF0aW5ncy5tYXAoKGlUZWFtUmF0aW5nLCBpKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IFtpT21lZ2EsIGlEZWx0YV0gPSB0ZWFtUmF0aW5nc1xuICAgICAgLmZpbHRlcigoXywgcSkgPT4gaSAhPT0gcSlcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChbb21lZ2EsIGRlbHRhXSwgW3FNdSwgcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2lxID0gTWF0aC5zcXJ0KGlTaWdtYVNxICsgcVNpZ21hU3EgKyBUV09CRVRBU1EpXG4gICAgICAgICAgY29uc3QgZGVsdGFNdSA9IChpTXUgLSBxTXUpIC8gY2lxXG4gICAgICAgICAgY29uc3Qgc2lnU3FUb0NpcSA9IGlTaWdtYVNxIC8gY2lxXG4gICAgICAgICAgY29uc3QgaUdhbW1hID0gZ2FtbWEoY2lxLCB0ZWFtUmF0aW5ncy5sZW5ndGgsIC4uLmlUZWFtUmF0aW5nKVxuXG4gICAgICAgICAgaWYgKHFSYW5rID09PSBpUmFuaykge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgb21lZ2EgKyBzaWdTcVRvQ2lxICogdnQoZGVsdGFNdSwgRVBTSUxPTiAvIGNpcSksXG4gICAgICAgICAgICAgIGRlbHRhICsgKChpR2FtbWEgKiBzaWdTcVRvQ2lxKSAvIGNpcSkgKiB3dChkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzaWduID0gcVJhbmsgPiBpUmFuayA/IDEgOiAtMVxuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBvbWVnYSArIHNpZ24gKiBzaWdTcVRvQ2lxICogdihzaWduICogZGVsdGFNdSwgRVBTSUxPTiAvIGNpcSksXG4gICAgICAgICAgICBkZWx0YSArICgoaUdhbW1hICogc2lnU3FUb0NpcSkgLyBjaXEpICogdyhzaWduICogZGVsdGFNdSwgRVBTSUxPTiAvIGNpcSksXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBbMCwgMF1cbiAgICAgIClcblxuICAgIHJldHVybiBpVGVhbS5tYXAoKHsgbXUsIHNpZ21hIH0pID0+IHtcbiAgICAgIGNvbnN0IHNpZ21hU3EgPSBzaWdtYSAqIHNpZ21hXG4gICAgICByZXR1cm4ge1xuICAgICAgICBtdTogbXUgKyAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlPbWVnYSxcbiAgICAgICAgc2lnbWE6IHNpZ21hICogTWF0aC5zcXJ0KE1hdGgubWF4KDEgLSAoc2lnbWFTcSAvIGlTaWdtYVNxKSAqIGlEZWx0YSwgRVBTSUxPTikpLFxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZGVsXG4iLCAiaW1wb3J0IHsgemlwIH0gZnJvbSAncmFtZGEnXG5pbXBvcnQgdXRpbCwgeyBsYWRkZXJQYWlycyB9IGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgeyB3LCB2LCB2dCwgd3QgfSBmcm9tICcuLi9zdGF0aXN0aWNzJ1xuaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgeyBSYXRpbmcsIE9wdGlvbnMsIE1vZGVsIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmNvbnN0IG1vZGVsOiBNb2RlbCA9IChnYW1lOiBSYXRpbmdbXVtdLCBvcHRpb25zOiBPcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBUV09CRVRBU1EsIEVQU0lMT04gfSA9IGNvbnN0YW50cyhvcHRpb25zKVxuICBjb25zdCB7IHRlYW1SYXRpbmcsIGdhbW1hIH0gPSB1dGlsKG9wdGlvbnMpXG4gIGNvbnN0IHRlYW1SYXRpbmdzID0gdGVhbVJhdGluZyhnYW1lKVxuICBjb25zdCBhZGphY2VudFRlYW1zID0gbGFkZGVyUGFpcnModGVhbVJhdGluZ3MpXG5cbiAgcmV0dXJuIHppcCh0ZWFtUmF0aW5ncywgYWRqYWNlbnRUZWFtcykubWFwKChbaVRlYW1SYXRpbmcsIGlBZGphY2VudHNdKSA9PiB7XG4gICAgY29uc3QgW2lNdSwgaVNpZ21hU3EsIGlUZWFtLCBpUmFua10gPSBpVGVhbVJhdGluZ1xuICAgIGNvbnN0IFtpT21lZ2EsIGlEZWx0YV0gPSBpQWRqYWNlbnRzLnJlZHVjZShcbiAgICAgIChbb21lZ2EsIGRlbHRhXSwgW3FNdSwgcVNpZ21hU3EsIF9xVGVhbSwgcVJhbmtdKSA9PiB7XG4gICAgICAgIGNvbnN0IGNpcSA9IDIgKiBNYXRoLnNxcnQoaVNpZ21hU3EgKyBxU2lnbWFTcSArIFRXT0JFVEFTUSlcbiAgICAgICAgY29uc3QgZGVsdGFNdSA9IChpTXUgLSBxTXUpIC8gY2lxXG4gICAgICAgIGNvbnN0IHNpZ1NxVG9DaXEgPSBpU2lnbWFTcSAvIGNpcVxuICAgICAgICBjb25zdCBpR2FtbWEgPSBnYW1tYShjaXEsIHRlYW1SYXRpbmdzLmxlbmd0aCwgLi4uaVRlYW1SYXRpbmcpXG5cbiAgICAgICAgaWYgKHFSYW5rID09PSBpUmFuaykge1xuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBvbWVnYSArIHNpZ1NxVG9DaXEgKiB2dChkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICAgIGRlbHRhICsgKChpR2FtbWEgKiBzaWdTcVRvQ2lxKSAvIGNpcSkgKiB3dChkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICBdXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaWduID0gcVJhbmsgPiBpUmFuayA/IDEgOiAtMVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIG9tZWdhICsgc2lnbiAqIHNpZ1NxVG9DaXEgKiB2KHNpZ24gKiBkZWx0YU11LCBFUFNJTE9OIC8gY2lxKSxcbiAgICAgICAgICBkZWx0YSArICgoaUdhbW1hICogc2lnU3FUb0NpcSkgLyBjaXEpICogdyhzaWduICogZGVsdGFNdSwgRVBTSUxPTiAvIGNpcSksXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBbMCwgMF1cbiAgICApXG5cbiAgICByZXR1cm4gaVRlYW0ubWFwKCh7IG11LCBzaWdtYSB9KSA9PiB7XG4gICAgICBjb25zdCBzaWdtYVNxID0gc2lnbWEgKiBzaWdtYVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbXU6IG11ICsgKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpT21lZ2EsXG4gICAgICAgIHNpZ21hOiBzaWdtYSAqIE1hdGguc3FydChNYXRoLm1heCgxIC0gKHNpZ21hU3EgLyBpU2lnbWFTcSkgKiBpRGVsdGEsIEVQU0lMT04pKSxcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbFxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQSxtQkFBb0I7OztBQ0VwQixJQUFNLFVBQVUsQ0FBQyxZQUFxQjtBQUVwQyxRQUFNLEVBQUUsSUFBSSxHQUFHLEtBQUssSUFBSSx1QkFBdUIsT0FBTyxVQUFVLEtBQU8sSUFBSTtBQUMzRSxRQUFNLEVBQUUsTUFBTSxLQUFLLEtBQUssUUFBUSxLQUFLLEdBQUcsT0FBTyxRQUFRLEdBQUcsYUFBYSxxQkFBcUIsSUFBSTtBQUNoRyxRQUFNLFNBQVMsUUFBUTtBQUV2QixTQUFPO0FBQUEsSUFDTCxPQUFPO0FBQUEsSUFDUCxJQUFJO0FBQUEsSUFDSixTQUFTO0FBQUEsSUFDVCxXQUFXLElBQUk7QUFBQSxJQUNmLE1BQU07QUFBQSxJQUNOLFFBQVE7QUFBQSxJQUNSLEdBQUc7QUFBQSxJQUNILEtBQUs7QUFBQSxJQUNMLGFBQWE7QUFBQSxFQUNmO0FBQ0Y7QUFFQSxJQUFPLG9CQUFROzs7QURYUixJQUFNLE1BQU0sQ0FBQyxHQUFXLE1BQWMsSUFBSTtBQUUxQyxJQUFNLFFBQVEsQ0FBQyxHQUFXLE1BQWM7QUFDN0MsTUFBSSxJQUFJLEdBQUc7QUFDVCxXQUFPO0FBQUEsRUFDVDtB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QUMsYUFBYSxVQUFVLE1BQU07QUFDeEUsVUFBTSxDQUFDLEtBQUssVUFBVSxPQUFPLEtBQUssSUFBSTtBQUN0QyxVQUFNLENBQUMsUUFBUSxNQUFNLElBQUksV0FBVztBQUFBLE1BQ2xDLENBQUMsQ0FBQyxPQUFPLEtBQUssR0FBRyxDQUFDLEtBQUssVUFBVSxRQUFRLEtBQUssTUFBTTtBQUNsRCxjQUFNLE1BQU0sSUFBSSxLQUFLLEtBQUssV0FBVyxXQUFXLFNBQVM7QUFDekQsY0FBTSxXQUFXLE1BQU0sT0FBTztBQUM5QixjQUFNLGFBQWEsV0FBVztBQUM5QixjQUFNLFNBQVNDLE9BQU0sS0FBSyxZQUFZLFFBQVEsR0FBRyxXQUFXO0FBRTVELFlBQUksVUFBVSxPQUFPO0FBQ25CLGlCQUFPO0FBQUEsWUFDTCxRQUFRLGFBQWEsR0FBRyxTQUFTLFVBQVUsR0FBRztBQUFBLFlBQzlDLFFBQVUsU0FBUyxhQUFjLE1BQU8sR0FBRyxTQUFTLFVBQVUsR0FBRztBQUFBLFVBQ25FO0FBQUEsUUFDRjtBQUVBLGNBQU0sT0FBTyxRQUFRLFFBQVEsSUFBSTtBQUNqQyxlQUFPO0FBQUEsVUFDTCxRQUFRLE9BQU8sYUFBYSxFQUFFLE9BQU8sU0FBUyxVQUFVLEdBQUc7QUFBQSxVQUMzRCxRQUFVLFNBQVMsYUFBYyxNQUFPLEVBQUUsT0FBTyxTQUFTLFVBQVUsR0FBRztBQUFBLFFBQ3pFO0FBQUEsTUFDRjtBQUFBLE1BQ0EsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNQO0FBRUEsV0FBTyxNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxNQUFNO0FBQ2xDLFlBQU0sVUFBVSxRQUFRO0FBQ3hCLGFBQU87QUFBQSxRQUNMLElBQUksS0FBTSxVQUFVLFdBQVk7QUFBQSxRQUNoQyxPQUFPLFFBQVEsS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFLLFVBQVUsV0FBWSxRQUFRLE9BQU8sQ0FBQztBQUFBLE1BQy9FO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSCxDQUFDO0FBQ0g7QUFFQSxJQUFPLG1DQUFRRjsiLAogICJuYW1lcyI6IFsidXRpbEMiLCAidGVhbVJhdGluZyIsICJnYW1tYSIsICJtb2RlbCIsICJ0ZWFtUmF0aW5nIiwgImdhbW1hIiwgImltcG9ydF9yYW1kYSIsICJtb2RlbCIsICJ0ZWFtUmF0aW5nIiwgImdhbW1hIiwgImdhdXNzaWFuIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiLCAiaW1wb3J0X3JhbWRhIiwgIm1vZGVsIiwgInRlYW1SYXRpbmciLCAiZ2FtbWEiXQp9Cg==